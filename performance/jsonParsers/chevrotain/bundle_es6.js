!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.blah=e():t.blah=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";function r(t){return t&&0===t.length}function i(t){return null==t?[]:Object.keys(t)}function o(t){let e=[],n=Object.keys(t);for(let r=0;r<n.length;r++)e.push(t[n[r]]);return e}function s(t,e){let n=[],r=i(t);for(let i=0;i<r.length;i++){let o=r[i];n.push(e.call(null,t[o],o))}return n}function a(t,e){let n=[];for(let r=0;r<t.length;r++)n.push(e.call(null,t[r],r));return n}function c(t){let e=[];for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?e=e.concat(c(r)):e.push(r)}return e}function u(t){return r(t)?void 0:t[0]}function l(t){let e=t&&t.length;return e?t[e-1]:void 0}function h(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e.call(null,t[n],n);else{if(!C(t))throw Error("non exhaustive match");{let n=i(t);for(let r=0;r<n.length;r++){let i=n[r],o=t[i];e.call(null,o,i)}}}}function d(t){return"string"==typeof t}function f(t){return void 0===t}function p(t){return t instanceof Function}function m(t,e=1){return t.slice(e,t.length)}function E(t,e=1){return t.slice(0,t.length-e)}function O(t,e){let n=[];if(Array.isArray(t))for(let r=0;r<t.length;r++){let i=t[r];e.call(null,i)&&n.push(i)}return n}function T(t,e){return O(t,t=>!e(t))}function g(t,e){let n=Object.keys(t),r={};for(let i=0;i<n.length;i++){let o=n[i],s=t[o];e(s)&&(r[o]=s)}return r}function A(t,e){return!!C(t)&&t.hasOwnProperty(e)}function N(t,e){return void 0!==b(t,t=>t===e)}function R(t){let e=[];for(let n=0;n<t.length;n++)e.push(t[n]);return e}function I(t){let e={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function b(t,e){for(let n=0;n<t.length;n++){let r=t[n];if(e.call(null,r))return r}}function y(t,e){let n=[];for(let r=0;r<t.length;r++){let i=t[r];e.call(null,i)&&n.push(i)}return n}function S(t,e,n){const r=Array.isArray(t);let s=r?t:o(t),a=r?[]:i(t),c=n;for(let t=0;t<s.length;t++)c=e.call(null,c,s[t],r?t:a[t]);return c}function L(t){return T(t,t=>null==t)}function _(t,e=(t=>t)){let n=[];return S(t,(t,r)=>{let i=e(r);return N(n,i)?t:(n.push(i),t.concat(r))},[])}function v(t,...e){let n=[null].concat(e);return Function.bind.apply(t,n)}function k(t){return Array.isArray(t)}function x(t){return t instanceof RegExp}function C(t){return t instanceof Object}function j(t,e){for(let n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0}function P(t,e){return T(t,t=>N(e,t))}function M(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function w(t,e){for(let n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function F(t,e){let n=R(t);return n.sort((t,n)=>e(t)-e(n)),n}function U(t,e){if(t.length!==e.length)throw Error("can't zipObject with different number of keys and values!");let n={};for(let r=0;r<t.length;r++)n[t[r]]=e[r];return n}function D(t,...e){for(let n=0;n<e.length;n++){let r=e[n],o=i(r);for(let e=0;e<o.length;e++){let n=o[e];t[n]=r[n]}}return t}function $(t,...e){for(let n=0;n<e.length;n++){let r=e[n];if(f(r))continue;let o=i(r);for(let e=0;e<o.length;e++){let n=o[e];A(t,n)||(t[n]=r[n])}}return t}function B(...t){return $.apply(null,[{}].concat(t))}function K(t,e){let n={};return h(t,t=>{let r=e(t),i=n[r];i?i.push(t):n[r]=[t]}),n}function G(t,e){let n=I(t),r=i(e);for(let t=0;t<r.length;t++){let i=r[t],o=e[i];n[i]=o}return n}function W(){}function V(t){return t}function H(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(void 0!==r?r:void 0)}return e}function Y(t){console&&console.error&&console.error(`Error: ${t}`)}function z(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function X(){return"function"==typeof Map}function q(t,e){e.forEach(e=>{const n=e.prototype;Object.getOwnPropertyNames(n).forEach(r=>{if("constructor"===r)return;const i=Object.getOwnPropertyDescriptor(n,r);i&&(i.get||i.set)?Object.defineProperty(t.prototype,r,i):t.prototype[r]=e.prototype[r]})})}function Z(t){function e(){}e.prototype=t;const n=new e;function r(){return typeof n.bar}return r(),r(),t}n.d(e,"A",function(){return r}),n.d(e,"G",function(){return i}),n.d(e,"U",function(){return o}),n.d(e,"J",function(){return s}),n.d(e,"I",function(){return a}),n.d(e,"t",function(){return c}),n.d(e,"s",function(){return u}),n.d(e,"H",function(){return l}),n.d(e,"u",function(){return h}),n.d(e,"E",function(){return d}),n.d(e,"F",function(){return f}),n.d(e,"B",function(){return p}),n.d(e,"m",function(){return m}),n.d(e,"n",function(){return E}),n.d(e,"p",function(){return O}),n.d(e,"P",function(){return T}),n.d(e,"N",function(){return g}),n.d(e,"w",function(){return A}),n.d(e,"j",function(){return N}),n.d(e,"g",function(){return R}),n.d(e,"h",function(){return I}),n.d(e,"q",function(){return b}),n.d(e,"r",function(){return y}),n.d(e,"O",function(){return S}),n.d(e,"i",function(){return L}),n.d(e,"T",function(){return _}),n.d(e,"M",function(){return v}),n.d(e,"y",function(){return k}),n.d(e,"D",function(){return x}),n.d(e,"C",function(){return C}),n.d(e,"o",function(){return j}),n.d(e,"l",function(){return P}),n.d(e,"Q",function(){return M}),n.d(e,"x",function(){return w}),n.d(e,"R",function(){return F}),n.d(e,"f",function(){return D}),n.d(e,"k",function(){return B}),n.d(e,"v",function(){return K}),n.d(e,"K",function(){return G}),n.d(e,"b",function(){return W}),n.d(e,"a",function(){return V}),n.d(e,"L",function(){return H}),n.d(e,"c",function(){return Y}),n.d(e,"d",function(){return z}),n.d(e,"z",function(){return X}),n.d(e,"e",function(){return q}),n.d(e,"S",function(){return Z})},function(t,e,n){var r,i,o;"undefined"!=typeof self&&self,i=[],void 0===(o="function"==typeof(r=function(){function t(){}t.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},t.prototype.restoreState=function(t){this.idx=t.idx,this.input=t.input,this.groupIdx=t.groupIdx},t.prototype.pattern=function(t){this.idx=0,this.input=t,this.groupIdx=0,this.consumeChar("/");var e=this.disjunction();this.consumeChar("/");for(var n={type:"Flags",global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":a(n,"global");break;case"i":a(n,"ignoreCase");break;case"m":a(n,"multiLine");break;case"u":a(n,"unicode");break;case"y":a(n,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:e}},t.prototype.disjunction=function(){var t=[];for(t.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),t.push(this.alternative());return{type:"Disjunction",value:t}},t.prototype.alternative=function(){for(var t=[];this.isTerm();)t.push(this.term());return{type:"Alternative",value:t}},t.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},t.prototype.assertion=function(){switch(this.popChar()){case"^":return{type:"StartAnchor"};case"$":return{type:"EndAnchor"};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary"};case"B":return{type:"NonWordBoundary"}}throw Error("Invalid Assertion Escape");case"(":var t;switch(this.consumeChar("?"),this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead"}c(t);var e=this.disjunction();return this.consumeChar(")"),{type:t,value:e}}!function(){throw Error("Internal Error - Should never get here!")}()},t.prototype.quantifier=function(t){var e;switch(this.popChar()){case"*":e={atLeast:0,atMost:1/0};break;case"+":e={atLeast:1,atMost:1/0};break;case"?":e={atLeast:0,atMost:1};break;case"{":var n=this.integerIncludingZero();switch(this.popChar()){case"}":e={atLeast:n,atMost:n};break;case",":var r;this.isDigit()?(r=this.integerIncludingZero(),e={atLeast:n,atMost:r}):e={atLeast:n,atMost:1/0},this.consumeChar("}")}if(!0===t&&void 0===e)return;c(e)}if(!0!==t||void 0!==e)return c(e),"?"===this.peekChar(0)?(this.consumeChar("?"),e.greedy=!1):e.greedy=!0,e.type="Quantifier",e},t.prototype.atom=function(){var t;switch(this.peekChar()){case".":t=this.dotAll();break;case"\\":t=this.atomEscape();break;case"[":t=this.characterClass();break;case"(":t=this.group()}return void 0===t&&this.isPatternCharacter()&&(t=this.patternCharacter()),c(t),this.isQuantifier()&&(t.quantifier=this.quantifier()),t},t.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[o("\n"),o("\r"),o("\u2028"),o("\u2029")]}},t.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},t.prototype.decimalEscapeAtom=function(){var t=this.positiveInteger();return{type:"GroupBackReference",value:t}},t.prototype.characterClassEscape=function(){var t,e=!1;switch(this.popChar()){case"d":t=u;break;case"D":t=u,e=!0;break;case"s":t=h;break;case"S":t=h,e=!0;break;case"w":t=l;break;case"W":t=l,e=!0}return c(t),{type:"Set",value:t,complement:e}},t.prototype.controlEscapeAtom=function(){var t;switch(this.popChar()){case"f":t=o("\f");break;case"n":t=o("\n");break;case"r":t=o("\r");break;case"t":t=o("\t");break;case"v":t=o("\v")}return c(t),{type:"Character",value:t}},t.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var t=this.popChar();if(!1===/[a-zA-Z]/.test(t))throw Error("Invalid ");var e=t.toUpperCase().charCodeAt(0)-64;return{type:"Character",value:e}},t.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:o("\0")}},t.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},t.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},t.prototype.identityEscapeAtom=function(){var t=this.popChar();return{type:"Character",value:o(t)}},t.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:var t=this.popChar();return{type:"Character",value:o(t)}}},t.prototype.characterClass=function(){var t=[],e=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),e=!0);this.isClassAtom();){var n=this.classAtom(),r="Character"===n.type;if(r&&this.isRangeDash()){this.consumeChar("-");var i=this.classAtom(),a="Character"===i.type;if(a){if(i.value<n.value)throw Error("Range out of order in character class");t.push({from:n.value,to:i.value})}else s(n.value,t),t.push(o("-")),s(i.value,t)}else s(n.value,t)}return this.consumeChar("]"),{type:"Set",complement:e,value:t}},t.prototype.classAtom=function(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},t.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:o("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},t.prototype.group=function(){var t=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),t=!1;break;default:this.groupIdx++}var e=this.disjunction();this.consumeChar(")");var n={type:"Group",capturing:t,value:e};return t&&(n.idx=this.groupIdx),n},t.prototype.positiveInteger=function(){var t=this.popChar();if(!1===i.test(t))throw Error("Expecting a positive integer");for(;r.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)},t.prototype.integerIncludingZero=function(){var t=this.popChar();if(!1===r.test(t))throw Error("Expecting an integer");for(;r.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)},t.prototype.patternCharacter=function(){var t=this.popChar();switch(t){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:o(t)}}},t.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},t.prototype.isRangeDash=function(){return"-"===this.peekChar()&&this.isClassAtom(1)},t.prototype.isDigit=function(){return r.test(this.peekChar(0))},t.prototype.isClassAtom=function(t){switch(void 0===t&&(t=0),this.peekChar(t)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},t.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},t.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},t.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}},t.prototype.isQuantifier=function(){var t=this.saveState();try{return void 0!==this.quantifier(!0)}catch(t){return!1}finally{this.restoreState(t)}},t.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},t.prototype.parseHexDigits=function(t){for(var e="",r=0;r<t;r++){var i=this.popChar();if(!1===n.test(i))throw Error("Expecting a HexDecimal digits");e+=i}var o=parseInt(e,16);return{type:"Character",value:o}},t.prototype.peekChar=function(t){return void 0===t&&(t=0),this.input[this.idx+t]},t.prototype.popChar=function(){var t=this.peekChar(0);return this.consumeChar(),t},t.prototype.consumeChar=function(t){if(void 0!==t&&this.input[this.idx]!==t)throw Error("Expected: '"+t+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++};var e,n=/[0-9a-fA-F]/,r=/[0-9]/,i=/[1-9]/;function o(t){return t.charCodeAt(0)}function s(t,e){void 0!==t.length?t.forEach(function(t){e.push(t)}):e.push(t)}function a(t,e){if(!0===t[e])throw"duplicate flag "+e;t[e]=!0}function c(t){if(void 0===t)throw Error("Internal Error - Should never get here!")}var u=[];for(e=o("0");e<=o("9");e++)u.push(e);var l=[o("_")].concat(u);for(e=o("a");e<=o("z");e++)l.push(e);for(e=o("A");e<=o("Z");e++)l.push(e);var h=[o(" "),o("\f"),o("\n"),o("\r"),o("\t"),o("\v"),o("\t"),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o("\u2028"),o("\u2029"),o(" "),o(" "),o("　"),o("\ufeff")];function d(){}return d.prototype.visitChildren=function(t){for(var e in t){var n=t[e];t.hasOwnProperty(e)&&(void 0!==n.type?this.visit(n):Array.isArray(n)&&n.forEach(function(t){this.visit(t)},this))}},d.prototype.visit=function(t){switch(t.type){case"Pattern":this.visitPattern(t);break;case"Flags":this.visitFlags(t);break;case"Disjunction":this.visitDisjunction(t);break;case"Alternative":this.visitAlternative(t);break;case"StartAnchor":this.visitStartAnchor(t);break;case"EndAnchor":this.visitEndAnchor(t);break;case"WordBoundary":this.visitWordBoundary(t);break;case"NonWordBoundary":this.visitNonWordBoundary(t);break;case"Lookahead":this.visitLookahead(t);break;case"NegativeLookahead":this.visitNegativeLookahead(t);break;case"Character":this.visitCharacter(t);break;case"Set":this.visitSet(t);break;case"Group":this.visitGroup(t);break;case"GroupBackReference":this.visitGroupBackReference(t);break;case"Quantifier":this.visitQuantifier(t)}this.visitChildren(t)},d.prototype.visitPattern=function(t){},d.prototype.visitFlags=function(t){},d.prototype.visitDisjunction=function(t){},d.prototype.visitAlternative=function(t){},d.prototype.visitStartAnchor=function(t){},d.prototype.visitEndAnchor=function(t){},d.prototype.visitWordBoundary=function(t){},d.prototype.visitNonWordBoundary=function(t){},d.prototype.visitLookahead=function(t){},d.prototype.visitNegativeLookahead=function(t){},d.prototype.visitCharacter=function(t){},d.prototype.visitSet=function(t){},d.prototype.visitGroup=function(t){},d.prototype.visitGroupBackReference=function(t){},d.prototype.visitQuantifier=function(t){},{RegExpParser:t,BaseRegExpVisitor:d,VERSION:"0.4.0"}})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){"use strict";n.r(e);const r="4.8.1";var i=n(0);function o(t){return c(t.constructor)}const s=/^\s*function\s*(\S*)\s*\(/,a="name";function c(t){let e=t.name;return e||t.toString().match(s)[1]}function u(t,e){let n=Object.getOwnPropertyDescriptor(t,a);return!(!Object(i.F)(n)&&!n.configurable)&&(Object.defineProperty(t,a,{enumerable:!1,configurable:!0,writable:!1,value:e}),!0)}class l{constructor(){this._state={}}keys(){return Object(i.G)(this._state)}values(){return Object(i.U)(this._state)}put(t,e){this._state[t]=e}putAll(t){this._state=Object(i.f)(this._state,t._state)}get(t){return this._state[t]}containsKey(t){return Object(i.w)(this._state,t)}clear(){this._state={}}}var h=n(1);const d=new h.RegExpParser,f="Complement Sets are not supported for first char optimization",p='Unable to use "first char" lexer optimizations:\n';function m(t,e=!1){try{const n=d.pattern(t.toString());let r=E(n.value);return n.flags.ignoreCase&&(r=function(t){const e=[];return Object(i.u)(t,t=>{e.push(t);const n=String.fromCharCode(t);n.toUpperCase()!==n?e.push(n.toUpperCase().charCodeAt(0)):n.toLowerCase()!==n&&e.push(n.toLowerCase().charCodeAt(0))}),e}(r)),r}catch(n){if(n.message===f)e&&Object(i.d)(`${p}`+`\tUnable to optimize: < ${t.toString()} >\n`+"\tComplement Sets cannot be automatically optimized.\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.");else{let n="";e&&(n="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),Object(i.c)(`${p}\n`+`\tFailed parsing: < ${t.toString()} >\n`+`\tUsing the regexp-to-ast library version: ${h.VERSION}\n`+"\tPlease open an issue at: https://github.com/bd82/regexp-to-ast/issues"+n)}}return[]}function E(t){switch(t.type){case"Disjunction":return Object(i.t)(Object(i.I)(t.value,E));case"Alternative":const e=[],n=t.value;for(let t=0;t<n.length;t++){const r=n[t];if(Object(i.j)(["GroupBackReference","Lookahead","NegativeLookahead","StartAnchor","EndAnchor","WordBoundary","NonWordBoundary"],r.type))continue;const o=r;switch(o.type){case"Character":e.push(o.value);break;case"Set":if(!0===o.complement)throw Error(f);Object(i.u)(o.value,t=>{if("number"==typeof t)e.push(t);else{const n=t;for(let t=n.from;t<=n.to;t++)e.push(t)}});break;case"Group":const t=E(o.value);Object(i.u)(t,t=>e.push(t));break;default:throw Error("Non Exhaustive Match")}const s=void 0!==o.quantifier&&0===o.quantifier.atLeast;if("Group"===o.type&&!1===T(o)||"Group"!==o.type&&!1===s)break}return e;default:throw Error("non exhaustive match!")}}function O(t,e){return Object(i.q)(t.value,t=>{if("number"==typeof t)return Object(i.j)(e,t);{const n=t;return void 0!==Object(i.q)(e,t=>n.from<=t&&t<=n.to)}})}function T(t){return!(!t.quantifier||0!==t.quantifier.atLeast)||!!t.value&&(Object(i.y)(t.value)?Object(i.o)(t.value,T):T(t.value))}class g extends h.BaseRegExpVisitor{constructor(t){super(),this.targetCharCodes=t,this.found=!1}visitChildren(t){switch(t.type){case"Lookahead":return void this.visitLookahead(t);case"NegativeLookahead":return void this.visitNegativeLookahead(t)}super.visitChildren(t)}visitCharacter(t){Object(i.j)(this.targetCharCodes,t.value)&&(this.found=!0)}visitSet(t){t.complement?void 0===O(t,this.targetCharCodes)&&(this.found=!0):void 0!==O(t,this.targetCharCodes)&&(this.found=!0)}}function A(t,e){if(e instanceof RegExp){const n=d.pattern(e.toString()),r=new g(t);return r.visit(n),r.found}return void 0!==Object(i.q)(e,e=>Object(i.j)(t,e.charCodeAt(0)))}const N=new h.RegExpParser,R="PATTERN",I="defaultMode",b="modes";let y="boolean"==typeof new RegExp("(?:)").sticky;function S(t,e){let n=[],r=function(t){let e=Object(i.p)(t,t=>!Object(i.w)(t,R)),n=Object(i.I)(e,t=>({message:"Token Type: ->"+q(t)+"<- missing static 'PATTERN' property",type:V.MISSING_PATTERN,tokenTypes:[t]})),r=Object(i.l)(t,e);return{errors:n,valid:r}}(t);n=n.concat(r.errors);let o=function(t){let e=Object(i.p)(t,t=>{let e=t[R];return!(Object(i.D)(e)||Object(i.B)(e)||Object(i.w)(e,"exec")||Object(i.E)(e))}),n=Object(i.I)(e,t=>({message:"Token Type: ->"+q(t)+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:V.INVALID_PATTERN,tokenTypes:[t]})),r=Object(i.l)(t,e);return{errors:n,valid:r}}(r.valid),s=o.valid;return n=(n=(n=(n=(n=n.concat(o.errors)).concat(function(t){let e=[],n=Object(i.p)(t,t=>Object(i.D)(t[R]));return e=(e=(e=(e=(e=e.concat(function(t){class e extends h.BaseRegExpVisitor{constructor(){super(...arguments),this.found=!1}visitEndAnchor(t){this.found=!0}}let n=Object(i.p)(t,t=>{const n=t[R];try{const t=N.pattern(n.toString()),r=new e;return r.visit(t),r.found}catch(t){return L.test(n.source)}});return Object(i.I)(n,t=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+q(t)+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:V.EOI_ANCHOR_FOUND,tokenTypes:[t]}))}(n))).concat(function(t){class e extends h.BaseRegExpVisitor{constructor(){super(...arguments),this.found=!1}visitStartAnchor(t){this.found=!0}}let n=Object(i.p)(t,t=>{const n=t[R];try{const t=N.pattern(n.toString()),r=new e;return r.visit(t),r.found}catch(t){return _.test(n.source)}});return Object(i.I)(n,t=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+q(t)+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:V.SOI_ANCHOR_FOUND,tokenTypes:[t]}))}(n))).concat(function(t){let e=Object(i.p)(t,t=>{let e=t[R];return e instanceof RegExp&&(e.multiline||e.global)});return Object(i.I)(e,t=>({message:"Token Type: ->"+q(t)+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:V.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[t]}))}(n))).concat(function(t){let e=[],n=Object(i.I)(t,n=>Object(i.O)(t,(t,r)=>n.PATTERN.source!==r.PATTERN.source||Object(i.j)(e,r)||r.PATTERN===Y.NA?t:(e.push(r),t.push(r),t),[]));n=Object(i.i)(n);let r=Object(i.p)(n,t=>t.length>1);return Object(i.I)(r,t=>{let e=Object(i.I)(t,t=>q(t)),n=Object(i.s)(t).PATTERN;return{message:`The same RegExp pattern ->${n}<-`+`has been used in all of the following Token Types: ${e.join(", ")} <-`,type:V.DUPLICATE_PATTERNS_FOUND,tokenTypes:t}})}(n))).concat(function(t){let e=Object(i.p)(t,t=>{let e=t[R];return e.test("")});return Object(i.I)(e,t=>({message:"Token Type: ->"+q(t)+"<- static 'PATTERN' must not match an empty string",type:V.EMPTY_MATCH_PATTERN,tokenTypes:[t]}))}(n))}(s))).concat(function(t){let e=Object(i.p)(t,t=>{if(!Object(i.w)(t,"GROUP"))return!1;let e=t.GROUP;return e!==Y.SKIPPED&&e!==Y.NA&&!Object(i.E)(e)});return Object(i.I)(e,t=>({message:"Token Type: ->"+q(t)+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:V.INVALID_GROUP_TYPE_FOUND,tokenTypes:[t]}))}(s))).concat(function(t,e){let n=Object(i.p)(t,t=>void 0!==t.PUSH_MODE&&!Object(i.j)(e,t.PUSH_MODE));return Object(i.I)(n,t=>{let e=`Token Type: ->${q(t)}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${t.PUSH_MODE}<-`+"which does not exist";return{message:e,type:V.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[t]}})}(s,e))).concat(function(t){const e=[],n=Object(i.O)(t,(t,e,n)=>{const r=e.PATTERN;return r===Y.NA?t:(Object(i.E)(r)?t.push({str:r,idx:n,tokenType:e}):Object(i.D)(r)&&function(t){return void 0===Object(i.q)([".","\\","[","]","|","^","$","(",")","?","*","+","{"],e=>-1!==t.source.indexOf(e))}(r)&&t.push({str:r.source,idx:n,tokenType:e}),t)},[]);return Object(i.u)(t,(t,r)=>{Object(i.u)(n,({str:n,idx:o,tokenType:s})=>{if(r<o&&function(t,e){if(Object(i.D)(e)){const n=e.exec(t);return null!==n&&0===n.index}if(Object(i.B)(e))return e(t,0,[],{});if(Object(i.w)(e,"exec"))return e.exec(t,0,[],{});if("string"==typeof e)return e===t;throw Error("non exhaustive match")}(n,t.PATTERN)){let n=`Token: ->${q(s)}<- can never be matched.\n`+`Because it appears AFTER the Token Type ->${q(t)}<-`+"in the lexer's definition.\nSee https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#UNREACHABLE";e.push({message:n,type:V.UNREACHABLE_PATTERN,tokenTypes:[t,s]})}})}),e}(s))}const L=/[^\\][\$]/;const _=/[^\\[][\^]|^\^/;function v(t){let e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function k(t){let e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function x(t,e,n){const r=[];let o=!1;const s=Object(i.i)(Object(i.t)(Object(i.J)(t.modes,t=>t))),a=Object(i.P)(s,t=>t[R]===Y.NA),c=w(n);return e&&Object(i.u)(a,t=>{const e=M(t,c);if(!1!==e){const n={message:function(t,e){if(e.issue===V.IDENTIFY_TERMINATOR)return"Warning: unable to identify line terminator usage in pattern.\n"+`\tThe problem is in the <${t.name}> Token Type\n`+`\t Root cause: ${e.errMsg}.\n`+"\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(e.issue===V.CUSTOM_LINE_BREAK)return"Warning: A Custom Token Pattern should specify the <line_breaks> option.\n"+`\tThe problem is in the <${t.name}> Token Type\n`+"\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}(t,e),type:e.issue,tokenType:t};r.push(n)}else Object(i.w)(t,"LINE_BREAKS")?!0===t.LINE_BREAKS&&(o=!0):A(c,t.PATTERN)&&(o=!0)}),e&&!o&&r.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:V.NO_LINE_BREAKS_FLAGS}),r}function C(t){let e=t.PATTERN;if(Object(i.D)(e))return!1;if(Object(i.B)(e))return!0;if(Object(i.w)(e,"exec"))return!0;if(Object(i.E)(e))return!1;throw Error("non exhaustive match")}function j(t){return!(!Object(i.E)(t)||1!==t.length)&&t.charCodeAt(0)}const P={test:function(t){let e=t.length;for(let n=this.lastIndex;n<e;n++){let e=t.charCodeAt(n);if(10===e)return this.lastIndex=n+1,!0;if(13===e)return 10===t.charCodeAt(n+1)?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function M(t,e){if(Object(i.w)(t,"LINE_BREAKS"))return!1;if(Object(i.D)(t.PATTERN)){try{A(e,t.PATTERN)}catch(t){return{issue:V.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}if(Object(i.E)(t.PATTERN))return!1;if(C(t))return{issue:V.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function w(t){return Object(i.I)(t,t=>Object(i.E)(t)&&t.length>0?t.charCodeAt(0):t)}function F(t,e){const n=t.tokenTypeIdx;return n===e.tokenTypeIdx||!0===e.isParent&&!0===e.categoryMatchesMap[n]}function U(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}let D=1;const $=new l;function B(t){let e=function(t){let e=Object(i.g)(t),n=t,r=!0;for(;r;){n=Object(i.i)(Object(i.t)(Object(i.I)(n,t=>t.CATEGORIES)));let t=Object(i.l)(n,e);e=e.concat(t),Object(i.A)(t)?r=!1:n=t}return e}(t);!function(t){Object(i.u)(t,t=>{(function(t){return Object(i.w)(t,"tokenTypeIdx")})(t)||($.put(D,t),t.tokenTypeIdx=D++),K(t)&&!Object(i.y)(t.CATEGORIES)&&(t.CATEGORIES=[t.CATEGORIES]),K(t)||(t.CATEGORIES=[]),function(t){return Object(i.w)(t,"categoryMatches")}(t)||(t.categoryMatches=[]),function(t){return Object(i.w)(t,"categoryMatchesMap")}(t)||(t.categoryMatchesMap={}),function(t){return Object(i.w)(t,"tokenName")}(t)||(t.tokenName=q(t))})}(e),function(t){Object(i.u)(t,t=>{!function t(e,n){Object(i.u)(e,t=>{n.categoryMatchesMap[t.tokenTypeIdx]=!0});Object(i.u)(n.CATEGORIES,r=>{const o=e.concat(n);Object(i.j)(o,r)||t(o,r)})}([],t)})}(e),function(t){Object(i.u)(t,t=>{t.categoryMatches=[],Object(i.u)(t.categoryMatchesMap,(e,n)=>{t.categoryMatches.push($.get(n).tokenTypeIdx)})})}(e),Object(i.u)(e,t=>{t.isParent=t.categoryMatches.length>0})}function K(t){return Object(i.w)(t,"CATEGORIES")}function G(t){return Object(i.w)(t,"tokenTypeIdx")}const W={buildUnableToPopLexerModeMessage:t=>`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`,buildUnexpectedCharactersMessage:(t,e,n,r,i)=>`unexpected character: ->${t.charAt(e)}<- at offset: ${e},`+` skipped ${n} characters.`};var V;!function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK"}(V||(V={}));const H={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:W};Object.freeze(H);class Y{constructor(t,e=H){if(this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},"boolean"==typeof e)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");if(this.config=Object(i.K)(H,e),this.config.lineTerminatorsPattern===H.lineTerminatorsPattern)this.config.lineTerminatorsPattern=P;else if(this.config.lineTerminatorCharacters===H.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(e.safeMode&&e.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking);let n,r=!0;Object(i.y)(t)?((n={modes:{}}).modes[I]=Object(i.g)(t),n[I]=I):(r=!1,n=Object(i.h)(t)),this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(function(t,e,n){let r=[];return Object(i.w)(t,I)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+I+"> property in its definition\n",type:V.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),Object(i.w)(t,b)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+b+"> property in its definition\n",type:V.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),Object(i.w)(t,b)&&Object(i.w)(t,I)&&!Object(i.w)(t.modes,t.defaultMode)&&r.push({message:`A MultiMode Lexer cannot be initialized with a ${I}: <${t.defaultMode}>`+"which does not exist\n",type:V.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),Object(i.w)(t,b)&&Object(i.u)(t.modes,(t,e)=>{Object(i.u)(t,(t,n)=>{Object(i.F)(t)&&r.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:"+`<${e}> at index: <${n}>\n`,type:V.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})})}),r}(n,this.trackStartLines,this.config.lineTerminatorCharacters)),this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(x(n,this.trackStartLines,this.config.lineTerminatorCharacters)),n.modes=n.modes?n.modes:{},Object(i.u)(n.modes,(t,e)=>{n.modes[e]=Object(i.P)(t,t=>Object(i.F)(t))});let o=Object(i.G)(n.modes);if(Object(i.u)(n.modes,(t,n)=>{if(this.modes.push(n),this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(S(t,o)),Object(i.A)(this.lexerDefinitionErrors)){B(t);let r=function(t,e){e=Object(i.k)(e,{useSticky:y,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"]});let n=Object(i.P)(t,t=>t[R]===Y.NA),r=!1,o=Object(i.I)(n,t=>{let n=t[R];if(Object(i.D)(n)){let t=n.source;return 1===t.length&&"^"!==t&&"$"!==t&&"."!==t?t:2!==t.length||"\\"!==t[0]||Object(i.j)(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],t[1])?e.useSticky?k(n):v(n):t[1]}if(Object(i.B)(n))return r=!0,{exec:n};if(Object(i.w)(n,"exec"))return r=!0,n;if("string"==typeof n){if(1===n.length)return n;{let t=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),r=new RegExp(t);return e.useSticky?k(r):v(r)}}throw Error("non exhaustive match")}),s=Object(i.I)(n,t=>t.tokenTypeIdx),a=Object(i.I)(n,t=>{let e=t.GROUP;if(e!==Y.SKIPPED){if(Object(i.E)(e))return e;if(Object(i.F)(e))return!1;throw Error("non exhaustive match")}}),c=Object(i.I)(n,t=>{let e=t.LONGER_ALT;if(e)return Object(i.x)(n,e)}),u=Object(i.I)(n,t=>t.PUSH_MODE),l=Object(i.I)(n,t=>Object(i.w)(t,"POP_MODE"));const h=w(e.lineTerminatorCharacters);let d=Object(i.I)(n,t=>!1);"onlyOffset"!==e.positionTracking&&(d=Object(i.I)(n,t=>Object(i.w)(t,"LINE_BREAKS")?t.LINE_BREAKS:!1===M(t,h)?A(h,t.PATTERN):void 0));let f=Object(i.I)(n,C),E=Object(i.I)(o,j),O=Object(i.O)(n,(t,e)=>{let n=e.GROUP;return Object(i.E)(n)&&n!==Y.SKIPPED&&(t[n]=[]),t},{}),T=Object(i.I)(o,(t,e)=>({pattern:o[e],longerAlt:c[e],canLineTerminator:d[e],isCustom:f[e],short:E[e],group:a[e],push:u[e],pop:l[e],tokenTypeIdx:s[e],tokenType:n[e]}));function g(t,e,n){void 0===t[e]&&(t[e]=[]),t[e].push(n)}let N=!0,I=[];return e.safeMode||(I=Object(i.O)(n,(t,n,r)=>{if("string"==typeof n.PATTERN){const e=n.PATTERN.charCodeAt(0);g(t,e,T[r])}else if(Object(i.y)(n.START_CHARS_HINT))Object(i.u)(n.START_CHARS_HINT,e=>{const n="string"==typeof e?e.charCodeAt(0):e;g(t,n,T[r])});else if(Object(i.D)(n.PATTERN))if(n.PATTERN.unicode)N=!1,e.ensureOptimizations&&Object(i.c)(`${p}`+`\tUnable to analyze < ${n.PATTERN.toString()} > pattern.\n`+"\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE");else{const o=m(n.PATTERN,e.ensureOptimizations);Object(i.A)(o)&&(N=!1),Object(i.u)(o,e=>{g(t,e,T[r])})}else e.ensureOptimizations&&Object(i.c)(`${p}`+`\tTokenType: <${q(n)}> is using a custom token pattern without providing <start_chars_hint> parameter.\n`+"\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE"),N=!1;return t},[])),N&&I.length<65536&&(I=Object(i.L)(I)),{emptyGroups:O,patternIdxToConfig:T,charCodeToPatternIdxToConfig:I,hasCustom:r,canBeOptimized:N}}(t,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:e.positionTracking,ensureOptimizations:e.ensureOptimizations,safeMode:e.safeMode});this.patternIdxToConfig[n]=r.patternIdxToConfig,this.charCodeToPatternIdxToConfig[n]=r.charCodeToPatternIdxToConfig,this.emptyGroups=Object(i.K)(this.emptyGroups,r.emptyGroups),this.hasCustom=r.hasCustom||this.hasCustom,this.canModeBeOptimized[n]=r.canBeOptimized}}),this.defaultMode=n.defaultMode,!Object(i.A)(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let t=Object(i.I)(this.lexerDefinitionErrors,t=>t.message).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+t)}if(Object(i.u)(this.lexerDefinitionWarning,t=>{Object(i.d)(t.message)}),y?(this.chopInput=i.a,this.match=this.matchWithTest):(this.updateLastIndex=i.b,this.match=this.matchWithExec),r&&(this.handleModes=i.b),!1===this.trackStartLines&&(this.computeNewColumn=i.a),!1===this.trackEndLines&&(this.updateTokenEndLineColumnLocation=i.b),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else{if(!/onlyOffset/i.test(this.config.positionTracking))throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.createTokenInstance=this.createOffsetOnlyToken}this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom);const s=Object(i.O)(this.canModeBeOptimized,(t,e,n)=>(!1===e&&t.push(n),t),[]);if(e.ensureOptimizations&&!Object(i.A)(s))throw Error(`Lexer Modes: < ${s.join(", ")} > cannot be optimized.\n`+'\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.');Object(i.S)(this)}tokenize(t,e=this.defaultMode){if(!Object(i.A)(this.lexerDefinitionErrors)){let t=Object(i.I)(this.lexerDefinitionErrors,t=>t.message).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+t)}return this.tokenizeInternal(t,e)}tokenizeInternal(t,e){let n,r,o,s,a,c,u,l,h,d,f,p,m,E,O,T=t,g=T.length,A=0,N=0,R=this.hasCustom?0:Math.floor(t.length/10),I=new Array(R),b=[],y=this.trackStartLines?1:void 0,S=this.trackStartLines?1:void 0,L=function(t){let e={},n=Object(i.G)(t);return Object(i.u)(n,n=>{let r=t[n];if(!Object(i.y)(r))throw Error("non exhaustive match");e[n]=[]}),e}(this.emptyGroups),_=this.trackStartLines;const v=this.config.lineTerminatorsPattern;let k=0,x=[],C=[],j=[];const P=[];Object.freeze(P);let M,w=void 0,F=t=>{if(1===j.length&&void 0===t.tokenType.PUSH_MODE){let e=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(t);b.push({offset:t.startOffset,line:void 0!==t.startLine?t.startLine:void 0,column:void 0!==t.startColumn?t.startColumn:void 0,length:t.image.length,message:e})}else{j.pop();let t=Object(i.H)(j);x=this.patternIdxToConfig[t],C=this.charCodeToPatternIdxToConfig[t],k=x.length;const e=this.canModeBeOptimized[t]&&!1===this.config.safeMode;w=C&&e?function(t){const e=C[t];return void 0===e?P:e}:function(){return x}}};function U(t){j.push(t),C=this.charCodeToPatternIdxToConfig[t],x=this.patternIdxToConfig[t],k=x.length,k=x.length;const e=this.canModeBeOptimized[t]&&!1===this.config.safeMode;w=C&&e?function(t){const e=C[t];return void 0===e?P:e}:function(){return x}}for(U.call(this,e);A<g;){a=null;let e=T.charCodeAt(A);const i=w(e);let R=i.length;for(n=0;n<R;n++){let r=(M=i[n]).pattern;c=null;let l=M.short;if(!1!==l?e===l&&(a=r):!0===M.isCustom?null!==(O=r.exec(T,A,I,L))?(a=O[0],void 0!==O.payload&&(c=O.payload)):a=null:(this.updateLastIndex(r,A),a=this.match(r,t,A)),null!==a){if(void 0!==(s=M.longerAlt)){let e=x[s],n=e.pattern;u=null,!0===e.isCustom?null!==(O=n.exec(T,A,I,L))?(o=O[0],void 0!==O.payload&&(u=O.payload)):o=null:(this.updateLastIndex(n,A),o=this.match(n,t,A)),o&&o.length>a.length&&(a=o,c=u,M=e)}break}}if(null!==a){if(l=a.length,void 0!==(h=M.group)&&(d=M.tokenTypeIdx,f=this.createTokenInstance(a,A,d,M.tokenType,y,S,l),this.handlePayload(f,c),!1===h?N=this.addToken(I,N,f):L[h].push(f)),t=this.chopInput(t,l),A+=l,S=this.computeNewColumn(S,l),!0===_&&!0===M.canLineTerminator){let t,e,n=0;v.lastIndex=0;do{!0===(t=v.test(a))&&(e=v.lastIndex-1,n++)}while(!0===t);0!==n&&(y+=n,S=l-e,this.updateTokenEndLineColumnLocation(f,h,e,n,y,S,l))}this.handleModes(M,F,U,f)}else{let e=A,n=y,i=S,o=!1;for(;!o&&A<g;)for(m=T.charCodeAt(A),t=this.chopInput(t,1),A++,r=0;r<k;r++){let e=x[r],n=e.pattern,i=e.short;if(!1!==i?T.charCodeAt(A)===i&&(o=!0):!0===e.isCustom?o=null!==n.exec(T,A,I,L):(this.updateLastIndex(n,A),o=null!==n.exec(t)),!0===o)break}p=A-e,E=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(T,e,p,n,i),b.push({offset:e,line:n,column:i,length:p,message:E})}}return this.hasCustom||(I.length=N),{tokens:I,groups:L,errors:b}}handleModes(t,e,n,r){if(!0===t.pop){let i=t.push;e(r),void 0!==i&&n.call(this,i)}else void 0!==t.push&&n.call(this,t.push)}chopInput(t,e){return t.substring(e)}updateLastIndex(t,e){t.lastIndex=e}updateTokenEndLineColumnLocation(t,e,n,r,i,o,s){let a,c;void 0!==e&&(c=(a=n===s-1)?-1:0,1===r&&!0===a||(t.endLine=i+c,t.endColumn=o-1-c))}computeNewColumn(t,e){return t+e}createTokenInstance(...t){return null}createOffsetOnlyToken(t,e,n,r){return{image:t,startOffset:e,tokenTypeIdx:n,tokenType:r}}createStartOnlyToken(t,e,n,r,i,o){return{image:t,startOffset:e,startLine:i,startColumn:o,tokenTypeIdx:n,tokenType:r}}createFullToken(t,e,n,r,i,o,s){return{image:t,startOffset:e,endOffset:e+s-1,startLine:i,endLine:i,startColumn:o,endColumn:o+s-1,tokenTypeIdx:n,tokenType:r}}addToken(t,e,n){return 666}addTokenUsingPush(t,e,n){return t.push(n),e}addTokenUsingMemberAccess(t,e,n){return t[e]=n,++e}handlePayload(t,e){}handlePayloadNoCustom(t,e){}handlePayloadWithCustom(t,e){null!==e&&(t.payload=e)}match(t,e,n){return null}matchWithTest(t,e,n){return!0===t.test(e)?e.substring(n,t.lastIndex):null}matchWithExec(t,e){let n=t.exec(e);return null!==n?n[0]:n}}function z(t){return X(t)?t.LABEL:q(t)}function X(t){return Object(i.E)(t.LABEL)&&""!==t.LABEL}function q(t){return Object(i.C)(t)&&t.hasOwnProperty("tokenName")&&Object(i.E)(t.tokenName)?t.tokenName:c(t)}Y.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",Y.NA=/NOT_APPLICABLE/;const Z="parent",Q="categories",J="label",tt="group",et="push_mode",nt="pop_mode",rt="longer_alt",it="line_breaks",ot="start_chars_hint";function st(t){return function(t){let e=t.name,n=t.pattern,r={};u(r,e)||(r.tokenName=e);Object(i.F)(n)||(r.PATTERN=n);if(Object(i.w)(t,Z))throw"The parent property is no longer supported.\nSee: https://github.com/SAP/chevrotain/issues/564#issuecomment-349062346 for details.";Object(i.w)(t,Q)&&(r.CATEGORIES=t[Q]);B([r]),Object(i.w)(t,J)&&(r.LABEL=t[J]);Object(i.w)(t,tt)&&(r.GROUP=t[tt]);Object(i.w)(t,nt)&&(r.POP_MODE=t[nt]);Object(i.w)(t,et)&&(r.PUSH_MODE=t[et]);Object(i.w)(t,rt)&&(r.LONGER_ALT=t[rt]);Object(i.w)(t,it)&&(r.LINE_BREAKS=t[it]);Object(i.w)(t,ot)&&(r.START_CHARS_HINT=t[ot]);return r}(t)}const at=st({name:"EOF",pattern:Y.NA});function ct(t,e,n,r,i,o,s,a){return{image:e,startOffset:n,endOffset:r,startLine:i,endLine:o,startColumn:s,endColumn:a,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function ut(t,e){return F(t,e)}B([at]);class lt{constructor(t){this.definition=t}accept(t){t.visit(this),Object(i.u)(this.definition,e=>{e.accept(t)})}}class ht extends lt{constructor(t){super([]),this.idx=1,Object(i.f)(this,Object(i.N)(t,t=>void 0!==t))}set definition(t){}get definition(){return void 0!==this.referencedRule?this.referencedRule.definition:[]}accept(t){t.visit(this)}}class dt extends lt{constructor(t){super(t.definition),this.orgText="",Object(i.f)(this,Object(i.N)(t,t=>void 0!==t))}}class ft extends lt{constructor(t){super(t.definition),Object(i.f)(this,Object(i.N)(t,t=>void 0!==t))}}class pt extends lt{constructor(t){super(t.definition),this.idx=1,Object(i.f)(this,Object(i.N)(t,t=>void 0!==t))}}class mt extends lt{constructor(t){super(t.definition),this.idx=1,Object(i.f)(this,Object(i.N)(t,t=>void 0!==t))}}class Et extends lt{constructor(t){super(t.definition),this.idx=1,Object(i.f)(this,Object(i.N)(t,t=>void 0!==t))}}class Ot extends lt{constructor(t){super(t.definition),this.idx=1,Object(i.f)(this,Object(i.N)(t,t=>void 0!==t))}}class Tt extends lt{constructor(t){super(t.definition),this.idx=1,Object(i.f)(this,Object(i.N)(t,t=>void 0!==t))}}class gt extends lt{constructor(t){super(t.definition),this.idx=1,Object(i.f)(this,Object(i.N)(t,t=>void 0!==t))}}class At{constructor(t){this.idx=1,Object(i.f)(this,Object(i.N)(t,t=>void 0!==t))}accept(t){t.visit(this)}}function Nt(t){return Object(i.I)(t,Rt)}function Rt(t){function e(t){return Object(i.I)(t,Rt)}if(t instanceof ht)return{type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};if(t instanceof ft)return{type:"Flat",definition:e(t.definition)};if(t instanceof pt)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof mt)return{type:"RepetitionMandatory",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof Et)return{type:"RepetitionMandatoryWithSeparator",name:t.name,idx:t.idx,separator:Rt(new At({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof Tt)return{type:"RepetitionWithSeparator",name:t.name,idx:t.idx,separator:Rt(new At({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof Ot)return{type:"Repetition",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof gt)return{type:"Alternation",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof At){let e={type:"Terminal",name:q(t.terminalType),label:z(t.terminalType),idx:t.idx},n=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(e.pattern=Object(i.D)(n)?n.source:n),e}if(t instanceof dt)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}class It{walk(t,e=[]){Object(i.u)(t.definition,(n,r)=>{let o=Object(i.m)(t.definition,r+1);if(n instanceof ht)this.walkProdRef(n,o,e);else if(n instanceof At)this.walkTerminal(n,o,e);else if(n instanceof ft)this.walkFlat(n,o,e);else if(n instanceof pt)this.walkOption(n,o,e);else if(n instanceof mt)this.walkAtLeastOne(n,o,e);else if(n instanceof Et)this.walkAtLeastOneSep(n,o,e);else if(n instanceof Tt)this.walkManySep(n,o,e);else if(n instanceof Ot)this.walkMany(n,o,e);else{if(!(n instanceof gt))throw Error("non exhaustive match");this.walkOr(n,o,e)}})}walkTerminal(t,e,n){}walkProdRef(t,e,n){}walkFlat(t,e,n){let r=e.concat(n);this.walk(t,r)}walkOption(t,e,n){let r=e.concat(n);this.walk(t,r)}walkAtLeastOne(t,e,n){let r=[new pt({definition:t.definition})].concat(e,n);this.walk(t,r)}walkAtLeastOneSep(t,e,n){let r=bt(t,e,n);this.walk(t,r)}walkMany(t,e,n){let r=[new pt({definition:t.definition})].concat(e,n);this.walk(t,r)}walkManySep(t,e,n){let r=bt(t,e,n);this.walk(t,r)}walkOr(t,e,n){let r=e.concat(n);Object(i.u)(t.definition,t=>{let e=new ft({definition:[t]});this.walk(e,r)})}}function bt(t,e,n){return[new pt({definition:[new At({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}class yt{visit(t){if(t instanceof ht)return this.visitNonTerminal(t);if(t instanceof ft)return this.visitFlat(t);if(t instanceof pt)return this.visitOption(t);if(t instanceof mt)return this.visitRepetitionMandatory(t);if(t instanceof Et)return this.visitRepetitionMandatoryWithSeparator(t);if(t instanceof Tt)return this.visitRepetitionWithSeparator(t);if(t instanceof Ot)return this.visitRepetition(t);if(t instanceof gt)return this.visitAlternation(t);if(t instanceof At)return this.visitTerminal(t);if(t instanceof dt)return this.visitRule(t);throw Error("non exhaustive match")}visitNonTerminal(t){}visitFlat(t){}visitOption(t){}visitRepetition(t){}visitRepetitionMandatory(t){}visitRepetitionMandatoryWithSeparator(t){}visitRepetitionWithSeparator(t){}visitAlternation(t){}visitTerminal(t){}visitRule(t){}}function St(t,e=[]){return!!(t instanceof pt||t instanceof Ot||t instanceof Tt)||(t instanceof gt?Object(i.Q)(t.definition,t=>St(t,e)):!(t instanceof ht&&Object(i.j)(e,t))&&(t instanceof lt&&(t instanceof ht&&e.push(t),Object(i.o)(t.definition,t=>St(t,e)))))}function Lt(t){if(t instanceof ht)return"SUBRULE";if(t instanceof pt)return"OPTION";if(t instanceof gt)return"OR";if(t instanceof mt)return"AT_LEAST_ONE";if(t instanceof Et)return"AT_LEAST_ONE_SEP";if(t instanceof Tt)return"MANY_SEP";if(t instanceof Ot)return"MANY";if(t instanceof At)return"CONSUME";throw Error("non exhaustive match")}class _t extends yt{constructor(){super(...arguments),this.separator="-",this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitTerminal(t){const e=q(t.terminalType)+this.separator+"Terminal";Object(i.w)(this.dslMethods,e)||(this.dslMethods[e]=[]),this.dslMethods[e].push(t)}visitNonTerminal(t){const e=t.nonTerminalName+this.separator+"Terminal";Object(i.w)(this.dslMethods,e)||(this.dslMethods[e]=[]),this.dslMethods[e].push(t)}visitOption(t){this.dslMethods.option.push(t)}visitRepetitionWithSeparator(t){this.dslMethods.repetitionWithSeparator.push(t)}visitRepetitionMandatory(t){this.dslMethods.repetitionMandatory.push(t)}visitRepetitionMandatoryWithSeparator(t){this.dslMethods.repetitionMandatoryWithSeparator.push(t)}visitRepetition(t){this.dslMethods.repetition.push(t)}visitAlternation(t){this.dslMethods.alternation.push(t)}}function vt(t){if(t instanceof ht)return vt(t.referencedRule);if(t instanceof At)return[t.terminalType];if(function(t){return t instanceof ft||t instanceof pt||t instanceof Ot||t instanceof mt||t instanceof Et||t instanceof Tt||t instanceof At||t instanceof dt}(t))return function(t){let e,n=[],r=t.definition,o=0,s=r.length>o,a=!0;for(;s&&a;)e=r[o],a=St(e),n=n.concat(vt(e)),o+=1,s=r.length>o;return Object(i.T)(n)}(t);if(function(t){return t instanceof gt}(t))return function(t){let e=Object(i.I)(t.definition,t=>vt(t));return Object(i.T)(Object(i.t)(e))}(t);throw Error("non exhaustive match")}let kt="_~IN~_";class xt extends It{constructor(t){super(),this.topProd=t,this.follows=new l}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(t,e,n){}walkProdRef(t,e,n){let r=(i=t.referencedRule,o=t.idx,i.name+o+kt+this.topProd.name);var i,o;let s=e.concat(n),a=vt(new ft({definition:s}));this.follows.put(r,a)}}class Ct{constructor(t,e){if(this.start=t,this.end=e,!function(t,e){return!(t<0||e<t)}(t,e))throw new Error("INVALID RANGE")}contains(t){return this.start<=t&&this.end>=t}containsRange(t){return this.start<=t.start&&this.end>=t.end}isContainedInRange(t){return t.containsRange(this)}strictlyContainsRange(t){return this.start<t.start&&this.end>t.end}isStrictlyContainedInRange(t){return t.strictlyContainsRange(this)}}var jt;!function(t){t[t.OPTION=0]="OPTION",t[t.OR=1]="OR",t[t.MANY=2]="MANY",t[t.MANY_SEP=3]="MANY_SEP",t[t.AT_LEAST_ONE=4]="AT_LEAST_ONE",t[t.AT_LEAST_ONE_SEP=5]="AT_LEAST_ONE_SEP",t[t.REF=6]="REF",t[t.TERMINAL=7]="TERMINAL",t[t.FLAT=8]="FLAT"}(jt||(jt={}));const Pt=/(?:\s*{\s*NAME\s*:\s*["'`]([\w$]*)["'`])?/,Mt=new RegExp(Pt.source.replace("{","").replace(")?","\\s*,)?")),wt=/\.\s*CONSUME(\d+)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,Ft=new RegExp(wt.source,"g"),Ut=/\.\s*SUBRULE(\d+)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,Dt=new RegExp(Ut.source,"g"),$t=/\.\s*OPTION(\d+)?\s*\(/,Bt=new RegExp($t.source+Pt.source),Kt=new RegExp($t.source,"g"),Gt=/\.\s*MANY(\d+)?\s*\(/,Wt=new RegExp(Gt.source+Pt.source),Vt=new RegExp(Gt.source,"g"),Ht=/\s*SEP\s*:\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,Yt=new RegExp(/\.\s*MANY_SEP(\d+)?\s*\(\s*{/.source+Mt.source+Ht.source),zt=new RegExp(Yt.source,"g"),Xt=new RegExp(/\.\s*AT_LEAST_ONE_SEP(\d+)?\s*\(\s*{/.source+Mt.source+Ht.source),qt=new RegExp(Xt.source,"g"),Zt=/\.\s*AT_LEAST_ONE(\d+)?\s*\(/,Qt=new RegExp(Zt.source+Pt.source),Jt=new RegExp(Zt.source,"g"),te=/\.\s*OR(\d+)?\s*\(/,ee=new RegExp(te.source+Pt.source),ne=new RegExp(te.source,"g"),re=new RegExp(Mt.source+/\s*(ALT)\s*:/.source),ie=new RegExp(re.source,"g");let oe={};function se(t,e,n){oe=n;let r=function(t){let e=function(t){return Te(t,jt.TERMINAL,Ft)}(t),n=function(t){return Te(t,jt.REF,Dt)}(t),r=function(t){return ge(t,jt.AT_LEAST_ONE,Jt)}(t),o=function(t){return ge(t,jt.AT_LEAST_ONE_SEP,qt)}(t),s=function(t){return ge(t,jt.MANY,Vt)}(t),a=function(t){return ge(t,jt.MANY_SEP,zt)}(t),c=function(t){return ge(t,jt.OPTION,Kt)}(t),u=function(t){let e=ge(t,jt.OR,ne),n=function(t){let e=[];return Object(i.u)(t,t=>{let n=Ae(t.text,jt.FLAT,ie,Ee),r=t.range.start;Object(i.u)(n,t=>{t.range.start+=r,t.range.end+=r}),e=e.concat(n)}),Object(i.T)(e,t=>t.type+"~"+t.range.start+"~"+t.range.end+"~"+t.text)}(e);return e.concat(n)}(t);return[].concat(e,n,r,o,s,a,c,u)}(function(t){return t.replace(fe,me).replace(pe,me)}((" "+(" "+t)).replace(he,"").replace(de,"")));return function(t,e,n,r){return le(new dt({name:t,definition:[],orgText:r}),e,n,t)}(e,new Ct(0,t.length+2),r,t)}function ae(t,e,n){switch(t.type){case jt.AT_LEAST_ONE:return function(t,e,n){return ce(Qt,new mt({definition:[]}),t,e,n)}(t,e,n);case jt.AT_LEAST_ONE_SEP:return function(t,e,n){return ue(t,e,Et,Xt,n)}(t,e,n);case jt.MANY_SEP:return function(t,e,n){return ue(t,e,Tt,Yt,n)}(t,e,n);case jt.MANY:return function(t,e,n){return ce(Wt,new Ot({definition:[]}),t,e,n)}(t,e,n);case jt.OPTION:return function(t,e,n){return ce(Bt,new pt({definition:[]}),t,e,n)}(t,e,n);case jt.OR:return function(t,e,n){return ce(ee,new gt({definition:[]}),t,e,n)}(t,e,n);case jt.FLAT:return function(t,e,n){let r=new ft({definition:[]}),o=re.exec(t.text)[1];Object(i.F)(o)||(r.name=o);return le(r,t.range,e,n)}(t,e,n);case jt.REF:return function(t){let e=Ut.exec(t.text),n=void 0===e[1]?0:parseInt(e[1],10),r=e[2];return new ht({nonTerminalName:r,idx:n})}(t);case jt.TERMINAL:return function(t,e){let n=wt.exec(t.text),r=void 0===n[1]?0:parseInt(n[1],10),i=n[2],o=oe[i];if(!o)throw Error(`Terminal Token name: <${i}> not found in rule: <${e}>  \n`+"\tSee: https://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#TERMINAL_NAME_NOT_FOUND\n\tFor Further details.");return new At({terminalType:o,idx:r})}(t,n);default:throw Error("non exhaustive match")}}function ce(t,e,n,r,o){let s=t.exec(n.text),a=void 0===s[1];e.idx=a?0:parseInt(s[1],10);let c=s[2];return Object(i.F)(c)||(e.name=c),le(e,n.range,r,o)}function ue(t,e,n,r,o){let s=r.exec(t.text),a=void 0===s[1]?0:parseInt(s[1],10),c=s[3],u=oe[c];if(!u)throw Error("Separator Terminal Token name: "+c+" not found");let l=new n({definition:[],separator:u,idx:a}),h=s[2];return Object(i.F)(h)||(l.name=h),le(l,t.range,e,o)}function le(t,e,n,r){let o=(s=e,a=n,Object(i.p)(a,t=>{let e=s.strictlyContainsRange(t.range),n=Object(i.o)(a,e=>{let n=e.range.strictlyContainsRange(t.range),r=e.range.isStrictlyContainedInRange(s);return!(n&&r)});return e&&n}));var s,a;let c=Object(i.R)(o,t=>t.range.start),u=[];return Object(i.u)(c,t=>{u.push(ae(t,n,r))}),t.definition=u,t}let he=/\/\/.*/g,de=/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\//g,fe=/(NAME\s*:\s*)?"([^\\"]|\\([bfnrtv"\\\/]|u[0-9a-fA-F]{4}))*"/g,pe=/(NAME\s*:\s*)?'([^\\']|\\([bfnrtv'\\\/]|u[0-9a-fA-F]{4}))*'/g;function me(t,e){return void 0!==e?t:""}let Ee=Object(i.M)(Ne,"{","}"),Oe=Object(i.M)(Ne,"(",")");function Te(t,e,n){let r,i=[];for(;r=n.exec(t);){let t=r.index,o=n.lastIndex,s=new Ct(t,o),a=r[0];i.push({range:s,text:a,type:e})}return i}function ge(t,e,n){return Ae(t,e,n,Oe)}function Ae(t,e,n,r){let i,o=[];for(;i=n.exec(t);){let n=i.index,s=r(n+i[0].length,t),a=new Ct(n,s),c=t.substr(n,s-n+1);o.push({range:a,text:c,type:e})}return o}function Ne(t,e,n,r){let o=[1],s=-1;for(;!Object(i.A)(o)&&s+n<r.length;){s++;let i=r.charAt(n+s);i===t?o.push(1):i===e&&o.pop()}if(Object(i.A)(o))return s+n;throw new Error("INVALID INPUT TEXT, UNTERMINATED PARENTHESIS")}function Re(t,e){return Object(i.I)(t,t=>(function(t,e){switch(t.type){case"NonTerminal":return new ht({nonTerminalName:t.name,idx:t.idx});case"Flat":return new ft({name:t.name,definition:Re(t.definition,e)});case"Option":return new pt({name:t.name,idx:t.idx,definition:Re(t.definition,e)});case"RepetitionMandatory":return new mt({name:t.name,idx:t.idx,definition:Re(t.definition,e)});case"RepetitionMandatoryWithSeparator":return new Et({name:t.name,idx:t.idx,separator:e[t.separator.name],definition:Re(t.definition,e)});case"RepetitionWithSeparator":return new Tt({name:t.name,idx:t.idx,separator:e[t.separator.name],definition:Re(t.definition,e)});case"Repetition":return new Ot({name:t.name,idx:t.idx,definition:Re(t.definition,e)});case"Alternation":return new gt({name:t.name,idx:t.idx,definition:Re(t.definition,e)});case"Terminal":return new At({terminalType:e[t.name],idx:t.idx});case"Rule":return new dt({name:t.name,orgText:t.orgText,definition:Re(t.definition,e)});default:}})(t,e))}const Ie=4,be=4,ye=1<<Ie,Se=2<<Ie,Le=3<<Ie,_e=4<<Ie,ve=5<<Ie,ke=6<<Ie;function xe(t,e,n){return n|e|t}const Ce=24;function je(t,e,n,r){let i=r+1<<Ce;return xe(t,e,n)|i}function Pe(t,e){!0===isNaN(t.startOffset)?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset==!0&&(t.endOffset=e.endOffset)}function Me(t,e){!0===isNaN(t.startOffset)?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset==!0&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function we(t,e,n){void 0===t.children[e]?t.children[e]=[n]:t.children[e].push(n)}class Fe extends yt{constructor(t){super(),this.result=[],this.ruleIdx=t}collectNamedDSLMethod(t,e,n){if(!Object(i.F)(t.name)){let r;if(t instanceof pt||t instanceof Ot||t instanceof mt||t instanceof gt)r=new e({definition:t.definition,idx:t.idx});else{if(!(t instanceof Et||t instanceof Tt))throw Error("non exhaustive match");r=new e({definition:t.definition,idx:t.idx,separator:t.separator})}let i=[r],o=xe(this.ruleIdx,n,t.idx);this.result.push({def:i,key:o,name:t.name,orgProd:t})}}visitOption(t){this.collectNamedDSLMethod(t,pt,Se)}visitRepetition(t){this.collectNamedDSLMethod(t,Ot,Le)}visitRepetitionMandatory(t){this.collectNamedDSLMethod(t,mt,_e)}visitRepetitionMandatoryWithSeparator(t){this.collectNamedDSLMethod(t,Et,ke)}visitRepetitionWithSeparator(t){this.collectNamedDSLMethod(t,Tt,ve)}visitAlternation(t){this.collectNamedDSLMethod(t,gt,ye);const e=t.definition.length>1;Object(i.u)(t.definition,(n,r)=>{if(!Object(i.F)(n.name)){let i=n.definition;i=e?[new pt({definition:n.definition})]:n.definition;let o=je(this.ruleIdx,ye,t.idx,r);this.result.push({def:i,key:o,name:n.name,orgProd:n})}})}}class Ue extends It{constructor(t,e){super(),this.topProd=t,this.path=e,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=Object(i.g)(this.path.ruleStack).reverse(),this.occurrenceStack=Object(i.g)(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(t,e=[]){this.found||super.walk(t,e)}walkProdRef(t,e,n){if(t.referencedRule.name===this.nextProductionName&&t.idx===this.nextProductionOccurrence){let r=e.concat(n);this.updateExpectedNext(),this.walk(t.referencedRule,r)}}updateExpectedNext(){Object(i.A)(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class De extends Ue{constructor(t,e){super(t,e),this.path=e,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=q(this.path.lastTok),this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(t,e,n){if(this.isAtEndOfPath&&q(t.terminalType)===this.nextTerminalName&&t.idx===this.nextTerminalOccurrence&&!this.found){let t=e.concat(n),r=new ft({definition:t});this.possibleTokTypes=vt(r),this.found=!0}}}class $e extends It{constructor(t,e){super(),this.topRule=t,this.occurrence=e,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class Be extends $e{walkMany(t,e,n){if(t.idx===this.occurrence){let t=Object(i.s)(e.concat(n));this.result.isEndOfRule=void 0===t,t instanceof At&&(this.result.token=t.terminalType,this.result.occurrence=t.idx)}else super.walkMany(t,e,n)}}class Ke extends $e{walkManySep(t,e,n){if(t.idx===this.occurrence){let t=Object(i.s)(e.concat(n));this.result.isEndOfRule=void 0===t,t instanceof At&&(this.result.token=t.terminalType,this.result.occurrence=t.idx)}else super.walkManySep(t,e,n)}}class Ge extends $e{walkAtLeastOne(t,e,n){if(t.idx===this.occurrence){let t=Object(i.s)(e.concat(n));this.result.isEndOfRule=void 0===t,t instanceof At&&(this.result.token=t.terminalType,this.result.occurrence=t.idx)}else super.walkAtLeastOne(t,e,n)}}class We extends $e{walkAtLeastOneSep(t,e,n){if(t.idx===this.occurrence){let t=Object(i.s)(e.concat(n));this.result.isEndOfRule=void 0===t,t instanceof At&&(this.result.token=t.terminalType,this.result.occurrence=t.idx)}else super.walkAtLeastOneSep(t,e,n)}}function Ve(t,e,n=[]){n=Object(i.g)(n);let r=[],o=0;function s(s){let a=Ve(s.concat(Object(i.m)(t,o+1)),e,n);return r.concat(a)}for(;n.length<e&&o<t.length;){let e=t[o];if(e instanceof ft)return s(e.definition);if(e instanceof ht)return s(e.definition);if(e instanceof pt)r=s(e.definition);else{if(e instanceof mt){return s(e.definition.concat([new Ot({definition:e.definition})]))}if(e instanceof Et){return s([new ft({definition:e.definition}),new Ot({definition:[new At({terminalType:e.separator})].concat(e.definition)})])}if(e instanceof Tt){const t=e.definition.concat([new Ot({definition:[new At({terminalType:e.separator})].concat(e.definition)})]);r=s(t)}else if(e instanceof Ot){const t=e.definition.concat([new Ot({definition:e.definition})]);r=s(t)}else{if(e instanceof gt)return Object(i.u)(e.definition,t=>{r=s(t.definition)}),r;if(!(e instanceof At))throw Error("non exhaustive match");n.push(e.terminalType)}}o++}return r.push({partialPath:n,suffixDef:Object(i.m)(t,o)}),r}function He(t,e,n,r){const o=["EXIT_NONE_TERMINAL"];let s=!1;const a=e.length;let c=a-r-1,u=[],l=[];for(l.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!Object(i.A)(l);){let t=l.pop();if("EXIT_ALTERNATIVE"===t){s&&Object(i.H)(l).idx<=c&&l.pop();continue}let r=t.def,h=t.idx,d=t.ruleStack,f=t.occurrenceStack;if(Object(i.A)(r))continue;let p=r[0];if("EXIT_NONE_TERMINAL"===p){let t={idx:h,def:Object(i.m)(r),ruleStack:Object(i.n)(d),occurrenceStack:Object(i.n)(f)};l.push(t)}else if(p instanceof At)if(h<a-1){let t=h+1;if(n(e[t],p.terminalType)){let e={idx:t,def:Object(i.m)(r),ruleStack:d,occurrenceStack:f};l.push(e)}}else{if(h!==a-1)throw Error("non exhaustive match");u.push({nextTokenType:p.terminalType,nextTokenOccurrence:p.idx,ruleStack:d,occurrenceStack:f}),s=!0}else if(p instanceof ht){let t=Object(i.g)(d);t.push(p.nonTerminalName);let e=Object(i.g)(f);e.push(p.idx);let n={idx:h,def:p.definition.concat(o,Object(i.m)(r)),ruleStack:t,occurrenceStack:e};l.push(n)}else if(p instanceof pt){let t={idx:h,def:Object(i.m)(r),ruleStack:d,occurrenceStack:f};l.push(t),l.push("EXIT_ALTERNATIVE");let e={idx:h,def:p.definition.concat(Object(i.m)(r)),ruleStack:d,occurrenceStack:f};l.push(e)}else if(p instanceof mt){let t=new Ot({definition:p.definition,idx:p.idx}),e={idx:h,def:p.definition.concat([t],Object(i.m)(r)),ruleStack:d,occurrenceStack:f};l.push(e)}else if(p instanceof Et){let t=new At({terminalType:p.separator}),e=new Ot({definition:[t].concat(p.definition),idx:p.idx}),n={idx:h,def:p.definition.concat([e],Object(i.m)(r)),ruleStack:d,occurrenceStack:f};l.push(n)}else if(p instanceof Tt){let t={idx:h,def:Object(i.m)(r),ruleStack:d,occurrenceStack:f};l.push(t),l.push("EXIT_ALTERNATIVE");let e=new At({terminalType:p.separator}),n=new Ot({definition:[e].concat(p.definition),idx:p.idx}),o={idx:h,def:p.definition.concat([n],Object(i.m)(r)),ruleStack:d,occurrenceStack:f};l.push(o)}else if(p instanceof Ot){let t={idx:h,def:Object(i.m)(r),ruleStack:d,occurrenceStack:f};l.push(t),l.push("EXIT_ALTERNATIVE");let e=new Ot({definition:p.definition,idx:p.idx}),n={idx:h,def:p.definition.concat([e],Object(i.m)(r)),ruleStack:d,occurrenceStack:f};l.push(n)}else if(p instanceof gt)for(let t=p.definition.length-1;t>=0;t--){let e={idx:h,def:p.definition[t].definition.concat(Object(i.m)(r)),ruleStack:d,occurrenceStack:f};l.push(e),l.push("EXIT_ALTERNATIVE")}else if(p instanceof ft)l.push({idx:h,def:p.definition.concat(Object(i.m)(r)),ruleStack:d,occurrenceStack:f});else{if(!(p instanceof dt))throw Error("non exhaustive match");l.push(Ye(p,h,d,f))}}return u}function Ye(t,e,n,r){let o=Object(i.g)(n);o.push(t.name);let s=Object(i.g)(r);return s.push(1),{idx:e,def:t.definition,ruleStack:o,occurrenceStack:s}}var ze;!function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"}(ze||(ze={}));class Xe extends It{constructor(t,e,n){super(),this.topProd=t,this.targetOccurrence=e,this.targetProdType=n}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(t,e,n,r){return t.idx===this.targetOccurrence&&this.targetProdType===e&&(this.restDef=n.concat(r),!0)}walkOption(t,e,n){this.checkIsTarget(t,ze.OPTION,e,n)||super.walkOption(t,e,n)}walkAtLeastOne(t,e,n){this.checkIsTarget(t,ze.REPETITION_MANDATORY,e,n)||super.walkOption(t,e,n)}walkAtLeastOneSep(t,e,n){this.checkIsTarget(t,ze.REPETITION_MANDATORY_WITH_SEPARATOR,e,n)||super.walkOption(t,e,n)}walkMany(t,e,n){this.checkIsTarget(t,ze.REPETITION,e,n)||super.walkOption(t,e,n)}walkManySep(t,e,n){this.checkIsTarget(t,ze.REPETITION_WITH_SEPARATOR,e,n)||super.walkOption(t,e,n)}}class qe extends yt{constructor(t,e){super(),this.targetOccurrence=t,this.targetProdType=e,this.result=[]}checkIsTarget(t,e){t.idx===this.targetOccurrence&&this.targetProdType===e&&(this.result=t.definition)}visitOption(t){this.checkIsTarget(t,ze.OPTION)}visitRepetition(t){this.checkIsTarget(t,ze.REPETITION)}visitRepetitionMandatory(t){this.checkIsTarget(t,ze.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(t){this.checkIsTarget(t,ze.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(t){this.checkIsTarget(t,ze.REPETITION_WITH_SEPARATOR)}visitAlternation(t){this.checkIsTarget(t,ze.ALTERNATION)}}function Ze(t,e){function n(t,e){return Object(i.O)(t,(t,n,r)=>{if(r!==e){let e=Object(i.I)(n,t=>t.partialPath);return t.concat(e)}return t},[])}function r(t,e){return void 0===Object(i.q)(t,t=>Object(i.o)(e,(e,n)=>(function(t,e){return t===e||t&&e&&(t.categoryMatchesMap[e.tokenTypeIdx]||e.categoryMatchesMap[t.tokenTypeIdx])})(e,t[n])))}function o(t){let e=[];for(let n=0;n<t;n++)e.push([]);return e}let s=Object(i.I)(t,t=>Ve([t],1)),a=o(s.length),c=s;for(let t=1;t<=e;t++){let s=c;c=o(s.length);for(let o=0;o<s.length;o++){let u=s[o],l=n(s,o);for(let n=0;n<u.length;n++){let s=u[n].partialPath,h=u[n].suffixDef;if(r(l,s)||Object(i.A)(h)||s.length===e){let t=a[o];tn(t,s)||t.push(s)}else{let e=Ve(h,t+1,s);c[o]=c[o].concat(e)}}}}return a}function Qe(t,e,n){let r=new qe(t,ze.ALTERNATION);return e.accept(r),Ze(r.result,n)}function Je(t,e,n,r){let i=new qe(t,n);e.accept(i);let o=i.result,s=new Xe(e,t,n).startWalking();return Ze([new ft({definition:o}),new ft({definition:s})],r)}function tn(t,e){return void 0!==Object(i.q)(t,t=>e.length===t.length&&Object(i.o)(e,(e,n)=>e===t[n]||t[n].categoryMatchesMap[e.tokenTypeIdx]))}function en(t){return Object(i.o)(t,t=>Object(i.o)(t,t=>Object(i.o)(t,t=>Object(i.A)(t.categoryMatches))))}function nn(t,e,n,r,o,s){let a=i.I(t,t=>(function(t,e){let n=new sn;t.accept(n);let r=n.allProductions,o=i.v(r,rn),s=i.N(o,t=>t.length>1);return i.I(i.U(s),n=>{let r=i.s(n),o=e.buildDuplicateFoundError(t,n),s=Lt(r),a={message:o,type:Dn.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:s,occurrence:r.idx},c=on(r);return c&&(a.parameter=c),a})})(t,o)),c=i.I(t,t=>(function t(e,n,r,o=[]){let s=[];let a=function t(e){let n=[];if(i.A(e))return n;let r=i.s(e);if(r instanceof ht)n.push(r.referencedRule);else if(r instanceof ft||r instanceof pt||r instanceof mt||r instanceof Et||r instanceof Tt||r instanceof Ot)n=n.concat(t(r.definition));else if(r instanceof gt)n=i.t(i.I(r.definition,e=>t(e.definition)));else if(!(r instanceof At))throw Error("non exhaustive match");let o=St(r);let s=e.length>1;if(o&&s){let r=i.m(e);return n.concat(t(r))}return n}(n.definition);if(i.A(a))return[];{let n=e.name,c=i.j(a,e);c&&s.push({message:r.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:o}),type:Dn.LEFT_RECURSION,ruleName:n});let u=i.l(a,o.concat([e])),l=i.I(u,n=>{let s=i.g(o);return s.push(n),t(e,n,r,s)});return s.concat(i.t(l))}})(t,t,o)),u=[],l=[],h=[];Object(i.o)(c,i.A)&&(u=Object(i.I)(t,t=>(function(t,e){let n=new un;t.accept(n);let r=n.alternations;return i.O(r,(n,r)=>{let o=i.n(r.definition),s=i.I(o,(n,o)=>{const s=He([n],[],null,1);return i.A(s)?{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:r,emptyChoiceIdx:o}),type:Dn.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:r.idx,alternative:o+1}:null});return n.concat(i.i(s))},[])})(t,o)),l=Object(i.I)(t,t=>(function(t,e,n,r){let o=new un;t.accept(o);let s=o.alternations,a=n[t.name];a&&(s=Object(i.P)(s,t=>a[Lt(t)+(0===t.idx?"":t.idx)]));return i.O(s,(n,o)=>{let s=o.idx,a=Qe(s,t,e),c=function(t,e,n,r){let o=[],s=Object(i.O)(t,(e,n,r)=>(Object(i.u)(n,n=>{let s=[r];Object(i.u)(t,(t,e)=>{r!==e&&tn(t,n)&&s.push(e)}),s.length>1&&!tn(o,n)&&(o.push(n),e.push({alts:s,path:n}))}),e),[]);return i.I(s,t=>{let o=Object(i.I)(t.alts,t=>t+1);const s=r.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:o,prefixPath:t.path});return{message:s,type:Dn.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:[t.alts]}})}(a,o,t,r),u=function(t,e,n,r){let o=[],s=Object(i.O)(t,(t,e,n)=>{let r=Object(i.I)(e,t=>({idx:n,path:t}));return t.concat(r)},[]);return Object(i.u)(s,t=>{let a=t.idx,c=t.path,u=Object(i.r)(s,t=>t.idx<a&&function(t,e){return t.length<e.length&&Object(i.o)(t,(t,n)=>{const r=e[n];return t===r||r.categoryMatchesMap[t.tokenTypeIdx]})}(t.path,c)),l=Object(i.I)(u,t=>{let i=[t.idx+1,a+1];const o=0===e.idx?"":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:i,prefixPath:t.path}),type:Dn.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:o,alternatives:i}});o=o.concat(l)}),o}(a,o,t,r);return n.concat(c,u)},[])})(t,e,r,o)),h=function(t,e,n){let r=[];return Object(i.u)(t,t=>{let o=new ln;t.accept(o);let s=o.allProductions;Object(i.u)(s,o=>{let s=function(t){if(t instanceof pt)return ze.OPTION;if(t instanceof Ot)return ze.REPETITION;if(t instanceof mt)return ze.REPETITION_MANDATORY;if(t instanceof Et)return ze.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof Tt)return ze.REPETITION_WITH_SEPARATOR;if(t instanceof gt)return ze.ALTERNATION;throw Error("non exhaustive match")}(o),a=Je(o.idx,t,s,e)[0];if(Object(i.A)(Object(i.t)(a))){const e=n.buildEmptyRepetitionError({topLevelRule:t,repetition:o});r.push({message:e,type:Dn.NO_NON_EMPTY_LOOKAHEAD,ruleName:t.name})}})}),r}(t,e,o));let d=function(t,e,n){let r=[],o=Object(i.I)(e,t=>q(t));return Object(i.u)(t,t=>{const e=t.name;if(Object(i.j)(o,e)){let i=n.buildNamespaceConflictError(t);r.push({message:i,type:Dn.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:e})}}),r}(t,n,o),f=i.I(n,t=>(function(t,e){const n=[];q(t).match(an)||n.push({message:e.buildTokenNameError({tokenType:t,expectedPattern:an}),type:Dn.INVALID_TOKEN_NAME});return n})(t,o)),p=function(t,e){let n=[];return Object(i.u)(t,t=>{let r=new Fe("");t.accept(r);let o=Object(i.I)(r.result,t=>t.orgProd);n.push(Object(i.I)(o,n=>(function(t,e,n){let r,i=[];return e.name.match(cn)||(r=n.buildInvalidNestedRuleNameError(t,e),i.push({message:r,type:Dn.INVALID_NESTED_RULE_NAME,ruleName:t.name})),i})(t,n,e)))}),Object(i.t)(n)}(t,o),m=function(t,e){let n=[];return Object(i.u)(t,t=>{let r=new Fe("");t.accept(r);let o=Object(i.v)(r.result,t=>t.name),s=Object(i.N)(o,t=>t.length>1);Object(i.u)(Object(i.U)(s),r=>{const o=Object(i.I)(r,t=>t.orgProd),s=e.buildDuplicateNestedRuleNameError(t,o);n.push({message:s,type:Dn.DUPLICATE_NESTED_NAME,ruleName:t.name})})}),n}(t,o);const E=Object(i.I)(t,t=>(function(t,e){let n=new un;t.accept(n);let r=n.alternations;return i.O(r,(n,r)=>(r.definition.length>255&&n.push({message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:r}),type:Dn.TOO_MANY_ALTS,ruleName:t.name,occurrence:r.idx}),n),[])})(t,o)),O=Object(i.I)(t,t=>(function(t,e){const n=[],r=t.name;r.match(an)||n.push({message:e.buildInvalidRuleNameError({topLevelRule:t,expectedPattern:an}),type:Dn.INVALID_RULE_NAME,ruleName:r});return n})(t,o)),T=Object(i.I)(t,e=>(function(t,e,n,r){let o=[];if(Object(i.O)(e,(e,n)=>n.name===t.name?e+1:e,0)>1){const e=r.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});o.push({message:e,type:Dn.DUPLICATE_RULE_NAME,ruleName:t.name})}return o})(e,t,s,o));return i.t(a.concat(f,p,m,h,c,u,l,d,E,O,T))}function rn(t){return`${Lt(t)}_#_${t.idx}_#_${on(t)}`}function on(t){return t instanceof At?q(t.terminalType):t instanceof ht?t.nonTerminalName:""}class sn extends yt{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(t){this.allProductions.push(t)}visitOption(t){this.allProductions.push(t)}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}visitAlternation(t){this.allProductions.push(t)}visitTerminal(t){this.allProductions.push(t)}}const an=/^[a-zA-Z_]\w*$/,cn=new RegExp(an.source.replace("^","^\\$"));class un extends yt{constructor(){super(...arguments),this.alternations=[]}visitAlternation(t){this.alternations.push(t)}}class ln extends yt{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}}const hn={buildMismatchTokenMessage:({expected:t,actual:e,previous:n,ruleName:r})=>`Expecting ${X(t)?`--\x3e ${z(t)} <--`:`token of type --\x3e ${q(t)} <--`} but found --\x3e '${e.image}' <--`,buildNotAllInputParsedMessage:({firstRedundant:t,ruleName:e})=>"Redundant input, expecting EOF but found: "+t.image,buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:n,customUserDescription:r,ruleName:o}){let s="\nbut found: '"+Object(i.s)(e).image+"'";if(r)return"Expecting: "+r+s;{let e=Object(i.O)(t,(t,e)=>t.concat(e),[]),n=Object(i.I)(e,t=>`[${Object(i.I)(t,t=>z(t)).join(", ")}]`);return"Expecting: "+`one of these possible Token sequences:\n${Object(i.I)(n,(t,e)=>`  ${e+1}. ${t}`).join("\n")}`+s}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:n,ruleName:r}){let o="\nbut found: '"+Object(i.s)(e).image+"'";if(n)return"Expecting: "+n+o;return"Expecting: "+("expecting at least one iteration which starts with one of these possible Token sequences::\n  "+`<${Object(i.I)(t,t=>`[${Object(i.I)(t,t=>z(t)).join(",")}]`).join(" ,")}>`)+o}};Object.freeze(hn);const dn={buildRuleNotFoundError:(t,e)=>"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+"<-\ninside top level rule: ->"+t.name+"<-"},fn={buildDuplicateFoundError(t,e){const n=t.name,r=Object(i.s)(e),o=r.idx,s=Lt(r);let a=(c=r)instanceof At?q(c.terminalType):c instanceof ht?c.nonTerminalName:"";var c;let u=`->${s}<- with numerical suffix: ->${o}<-\n                  ${a?`and argument: ->${a}<-`:""}\n                  appears more than once (${e.length} times) in the top level rule: ->${n}<-.\n                  ${0===o?`Also note that numerical suffix 0 means ${s} without any suffix.`:""}\n                  To fix this make sure each usage of ${s} ${a?`with the argument: ->${a}<-`:""}\n                  in the rule ->${n}<- has a different occurrence index (0-5), as that combination acts as a unique\n                  position key in the grammar, which is needed by the parsing engine.\n                  \n                  For further details see: https://sap.github.io/chevrotain/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  `;return u=(u=u.replace(/[ \t]+/g," ")).replace(/\s\s+/g,"\n")},buildInvalidNestedRuleNameError:(t,e)=>`Invalid nested rule name: ->${e.name}<- inside rule: ->${t.name}<-\n`+`it must match the pattern: ->${cn.toString()}<-.\n`+"Note that this means a nested rule name must start with the '$'(dollar) sign.",buildDuplicateNestedRuleNameError:(t,e)=>`Duplicate nested rule name: ->${Object(i.s)(e).name}<- inside rule: ->${t.name}<-\n`+"A nested name must be unique in the scope of a top level grammar rule.",buildNamespaceConflictError:t=>"Namespace conflict found in grammar.\n"+`The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.\n`+"To resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter.",buildAlternationPrefixAmbiguityError(t){const e=Object(i.I)(t.prefixPath,t=>z(t)).join(", "),n=0===t.alternation.idx?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix\n`+`in <OR${n}> inside <${t.topLevelRule.name}> Rule,\n`+`<${e}> may appears as a prefix path in all these alternatives.\n`+"https://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details."},buildAlternationAmbiguityError(t){let e=Object(i.I)(t.prefixPath,t=>z(t)).join(", "),n=0===t.alternation.idx?"":t.alternation.idx,o=`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> in <OR${n}>`+` inside <${t.topLevelRule.name}> Rule,\n`+`<${e}> may appears as a prefix path in all these alternatives.\n`,s=r.replace(/\./g,"_");return o=o+"To Resolve this, try one of of the following: \n"+`1. Refactor your grammar to be LL(K) for the current value of k (by default k=${Fn.maxLookahead}})\n`+"2. Increase the value of K for your grammar by providing a larger 'maxLookahead' value in the parser's config\n3. This issue can be ignored (if you know what you are doing...), see https://sap.github.io/chevrotain/documentation/"+s+"/interfaces/iparserconfig.html#ignoredissues for more details\n"},buildEmptyRepetitionError(t){let e=Lt(t.repetition);return 0!==t.repetition.idx&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.\n`+"This could lead to an infinite loop."},buildTokenNameError:t=>`Invalid Grammar Token name: ->${q(t.tokenType)}<- it must match the pattern: ->${t.expectedPattern.toString()}<-`,buildEmptyAlternationError:t=>`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}>`+` in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.\n`+"Only the last alternative may be an empty alternative.",buildTooManyAlternativesError:t=>"An Alternation cannot have more than 256 alternatives:\n"+`<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.\n has ${t.alternation.definition.length+1} alternatives.`,buildLeftRecursionError(t){const e=t.topLevelRule.name;return"Left Recursion found in grammar.\n"+`rule: <${e}> can be invoked from itself (directly or indirectly)\n`+`without consuming any Tokens. The grammar path that causes this is: \n ${`${e} --\x3e ${i.I(t.leftRecursionPath,t=>t.name).concat([e]).join(" --\x3e ")}`}\n`+" To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring."},buildInvalidRuleNameError:t=>`Invalid grammar rule name: ->${t.topLevelRule.name}<- it must match the pattern: ->${t.expectedPattern.toString()}<-`,buildDuplicateRuleNameError(t){let e;return`Duplicate definition, rule: ->${e=t.topLevelRule instanceof dt?t.topLevelRule.name:t.topLevelRule}<- is already defined in the grammar: ->${t.grammarName}<-`}};class pn extends yt{constructor(t,e){super(),this.nameToTopRule=t,this.errMsgProvider=e,this.errors=[]}resolveRefs(){Object(i.u)(this.nameToTopRule.values(),t=>{this.currTopLevel=t,t.accept(this)})}visitNonTerminal(t){let e=this.nameToTopRule.get(t.nonTerminalName);if(e)t.referencedRule=e;else{let e=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,t);this.errors.push({message:e,type:Dn.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}}}function mn(t){t=Object(i.k)(t,{errMsgProvider:dn});const e=new l;return Object(i.u)(t.rules,t=>{e.put(t.name,t)}),function(t,e){let n=new pn(t,e);return n.resolveRefs(),n.errors}(e,t.errMsgProvider)}function En(t){return nn((t=Object(i.k)(t,{errMsgProvider:fn,ignoredIssues:{}})).rules,t.maxLookahead,t.tokenTypes,t.ignoredIssues,t.errMsgProvider,t.grammarName)}function On(t){Object(i.u)(t.rules,t=>{const e=new _t;t.accept(e),Object(i.u)(e.dslMethods,t=>{Object(i.u)(t,(t,e)=>{t.idx=e+1})})})}const Tn="MismatchedTokenException",gn="NoViableAltException",An="EarlyExitException",Nn="NotAllInputParsedException",Rn=[Tn,gn,An,Nn];function In(t){return Object(i.j)(Rn,t.name)}function bn(t,e,n){this.name=Tn,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}function yn(t,e,n){this.name=gn,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}function Sn(t,e){this.name=Nn,this.message=t,this.token=e,this.resyncedTokens=[]}function Ln(t,e,n){this.name=An,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}Object.freeze(Rn),bn.prototype=Error.prototype,yn.prototype=Error.prototype,Sn.prototype=Error.prototype,Ln.prototype=Error.prototype;const _n={},vn="InRuleRecoveryException";function kn(t){this.name=vn,this.message=t}kn.prototype=Error.prototype;function xn(t,e,n,r,i,o,s){let a=this.getKeyForAutomaticLookahead(r,i),c=this.firstAfterRepMap.get(a);if(void 0===c){let t=this.getCurrRuleFullName();c=new o(this.getGAstProductions().get(t),i).startWalking(),this.firstAfterRepMap.put(a,c)}let u=c.token,l=c.occurrence,h=c.isEndOfRule;1===this.RULE_STACK.length&&h&&void 0===u&&(u=at,l=1),this.shouldInRepetitionRecoveryBeTried(u,l,s)&&this.tryInRepetitionRecovery(t,e,n,u)}function Cn(t,e){let n=Object(i.G)(t),r=n.length;for(let i=0;i<r;i++){let r=t[n[i]],o=r.length;for(let t=0;t<o;t++){let n=r[t];void 0===n.tokenTypeIdx&&(void 0!==n.fullName?this[n.fullName](n.children,e):this[n.name](n.children,e))}}}function jn(t,e){let n=function(){};return u(n,t+"BaseSemantics"),(n.prototype={visit:function(t,e){if(Object(i.y)(t)&&(t=t[0]),!Object(i.F)(t))return void 0!==t.fullName?this[t.fullName](t.children,e):this[t.name](t.children,e)},validateVisitor:function(){let t=function(t,e){let n=function(t,e){let n=Object(i.I)(e,e=>{if(!Object(i.B)(t[e]))return{msg:`Missing visitor method: <${e}> on ${c(t.constructor)} CST Visitor.`,type:Pn.MISSING_METHOD,methodName:e}});return Object(i.i)(n)}(t,e),r=function(t,e){let n=[];for(let r in t)an.test(r)&&Object(i.B)(t[r])&&!Object(i.j)(Mn,r)&&!Object(i.j)(e,r)&&n.push({msg:`Redundant visitor method: <${r}> on ${c(t.constructor)} CST Visitor\n`+"There is no Grammar Rule corresponding to this method's name.\n"+`For utility methods on visitor classes use methods names that do not match /${an.source}/.`,type:Pn.REDUNDANT_METHOD,methodName:r});return n}(t,e);return n.concat(r)}(this,e);if(!Object(i.A)(t)){let e=Object(i.I)(t,t=>t.msg);throw Error(`Errors Detected in CST Visitor <${c(this.constructor)}>:\n\t`+`${e.join("\n\n").replace(/\n/g,"\n\t")}`)}}}).constructor=n,n._RULE_NAMES=e,n}var Pn;!function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"}(Pn||(Pn={}));const Mn=["constructor","visit","validateVisitor"];const wn=ct(at,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(wn);const Fn=Object.freeze({recoveryEnabled:!1,maxLookahead:4,ignoredIssues:{},dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:hn,serializedGrammar:null,nodeLocationTracking:"none"}),Un=Object.freeze({recoveryValueFunc:()=>void 0,resyncEnabled:!0});var Dn;function $n(t){return function(){return t}}!function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.INVALID_NESTED_RULE_NAME=10]="INVALID_NESTED_RULE_NAME",t[t.DUPLICATE_NESTED_NAME=11]="DUPLICATE_NESTED_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=12]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=13]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=14]="TOO_MANY_ALTS"}(Dn||(Dn={}));class Bn{constructor(t,e=Fn){this.ignoredIssues=Fn.ignoredIssues,this.definitionErrors=[],this.selfAnalysisDone=!1;this.initErrorHandler(e),this.initLexerAdapter(),this.initLooksAhead(e),this.initRecognizerEngine(t,e),this.initRecoverable(e),this.initTreeBuilder(e),this.initContentAssist(),this.ignoredIssues=Object(i.w)(e,"ignoredIssues")?e.ignoredIssues:Fn.ignoredIssues,Object(i.S)(this)}static performSelfAnalysis(t){t.performSelfAnalysis()}performSelfAnalysis(){let t;this.selfAnalysisDone=!0;let e=o(this),n=this.gastProductionsCache;if(this.serializedGrammar){const t=Re(this.serializedGrammar,this.tokensMap);Object(i.u)(t,t=>{this.gastProductionsCache.put(t.name,t)})}let r=mn({rules:n.values()});if(this.definitionErrors.push.apply(this.definitionErrors,r),Object(i.A)(r)){let t=En({rules:n.values(),maxLookahead:this.maxLookahead,tokenTypes:Object(i.U)(this.tokensMap),ignoredIssues:this.ignoredIssues,errMsgProvider:fn,grammarName:e});this.definitionErrors.push.apply(this.definitionErrors,t)}if(Object(i.A)(this.definitionErrors)){let t=function(t){let e=new l;return Object(i.u)(t,t=>{let n=new xt(t).startWalking();e.putAll(n)}),e}(n.values());this.resyncFollows=t}let s=function(t,e){let n={dictDef:new l,allRuleNames:[]};return Object(i.u)(t,t=>{let r=e.get(t.name);n.allRuleNames.push(t.name);let o=new Fe(r);t.accept(o),Object(i.u)(o.result,({def:e,key:r,name:i})=>{n.allRuleNames.push(t.name+i)})}),n}(n.values(),this.fullRuleNameToShort);if(this.allRuleNames=s.allRuleNames,!Bn.DEFER_DEFINITION_ERRORS_HANDLING&&!Object(i.A)(this.definitionErrors))throw t=Object(i.I)(this.definitionErrors,t=>t.message),new Error(`Parser Definition Errors detected:\n ${t.join("\n-------------------------------\n")}`)}}Bn.DEFER_DEFINITION_ERRORS_HANDLING=!1,Object(i.e)(Bn,[class{initRecoverable(t){this.firstAfterRepMap=new l,this.resyncFollows=new l,this.recoveryEnabled=Object(i.w)(t,"recoveryEnabled")?t.recoveryEnabled:Fn.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=xn)}getTokenToInsert(t){let e=ct(t,"",NaN,NaN,NaN,NaN,NaN,NaN);return e.isInsertedInRecovery=!0,e}canTokenTypeBeInsertedInRecovery(t){return!0}tryInRepetitionRecovery(t,e,n,r){let o=this.findReSyncTokenType(),s=this.exportLexerState(),a=[],c=!1,u=this.LA(1),l=this.LA(1),h=()=>{let t=this.LA(0),e=new bn(this.errorMessageProvider.buildMismatchTokenMessage({expected:r,actual:u,previous:t,ruleName:this.getCurrRuleFullName()}),u,this.LA(0));e.resyncedTokens=Object(i.n)(a),this.SAVE_ERROR(e)};for(;!c;){if(this.tokenMatcher(l,r))return void h();if(n.call(this))return h(),void t.apply(this,e);this.tokenMatcher(l,o)?c=!0:(l=this.SKIP_TOKEN(),this.addToResyncTokens(l,a))}this.importLexerState(s)}shouldInRepetitionRecoveryBeTried(t,e,n){return!1!==n&&void 0!==t&&void 0!==e&&!this.tokenMatcher(this.LA(1),t)&&!this.isBackTracking()&&!this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,e))}getFollowsForInRuleRecovery(t,e){let n=this.getCurrentGrammarPath(t,e);return this.getNextPossibleTokenTypes(n)}tryInRuleRecovery(t,e){if(this.canRecoverWithSingleTokenInsertion(t,e))return this.getTokenToInsert(t);if(this.canRecoverWithSingleTokenDeletion(t)){let t=this.SKIP_TOKEN();return this.consumeToken(),t}throw new kn("sad sad panda")}canPerformInRuleRecovery(t,e){return this.canRecoverWithSingleTokenInsertion(t,e)||this.canRecoverWithSingleTokenDeletion(t)}canRecoverWithSingleTokenInsertion(t,e){if(!this.canTokenTypeBeInsertedInRecovery(t))return!1;if(Object(i.A)(e))return!1;let n=this.LA(1);return void 0!==Object(i.q)(e,t=>this.tokenMatcher(n,t))}canRecoverWithSingleTokenDeletion(t){return this.tokenMatcher(this.LA(2),t)}isInCurrentRuleReSyncSet(t){let e=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(e);return Object(i.j)(n,t)}findReSyncTokenType(){let t=this.flattenFollowSet(),e=this.LA(1),n=2;for(;;){let r=e.tokenType;if(Object(i.j)(t,r))return r;e=this.LA(n),n++}}getCurrFollowKey(){if(1===this.RULE_STACK.length)return _n;let t=this.getLastExplicitRuleShortName(),e=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(t),idxInCallingRule:e,inRule:this.shortRuleNameToFullName(n)}}buildFullFollowKeyStack(){let t=this.RULE_STACK,e=this.RULE_OCCURRENCE_STACK;return Object(i.A)(this.LAST_EXPLICIT_RULE_STACK)||(t=Object(i.I)(this.LAST_EXPLICIT_RULE_STACK,t=>this.RULE_STACK[t]),e=Object(i.I)(this.LAST_EXPLICIT_RULE_STACK,t=>this.RULE_OCCURRENCE_STACK[t])),Object(i.I)(t,(n,r)=>0===r?_n:{ruleName:this.shortRuleNameToFullName(n),idxInCallingRule:e[r],inRule:this.shortRuleNameToFullName(t[r-1])})}flattenFollowSet(){let t=Object(i.I)(this.buildFullFollowKeyStack(),t=>this.getFollowSetFromFollowKey(t));return Object(i.t)(t)}getFollowSetFromFollowKey(t){if(t===_n)return[at];let e=t.ruleName+t.idxInCallingRule+kt+t.inRule;return this.resyncFollows.get(e)}addToResyncTokens(t,e){return this.tokenMatcher(t,at)||e.push(t),e}reSyncTo(t){let e=[],n=this.LA(1);for(;!1===this.tokenMatcher(n,t);)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,e);return Object(i.n)(e)}attemptInRepetitionRecovery(t,e,n,r,i,o,s){}getCurrentGrammarPath(t,e){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:Object(i.g)(this.RULE_OCCURRENCE_STACK),lastTok:t,lastTokOccurrence:e}}getHumanReadableRuleStack(){return Object(i.A)(this.LAST_EXPLICIT_RULE_STACK)?Object(i.I)(this.RULE_STACK,t=>this.shortRuleNameToFullName(t)):Object(i.I)(this.LAST_EXPLICIT_RULE_STACK,t=>this.shortRuleNameToFullName(this.RULE_STACK[t]))}},class{initLooksAhead(t){this.dynamicTokensEnabled=Object(i.w)(t,"dynamicTokensEnabled")?t.dynamicTokensEnabled:Fn.dynamicTokensEnabled,this.maxLookahead=Object(i.w)(t,"maxLookahead")?t.maxLookahead:Fn.maxLookahead,this.lookAheadFuncsCache=Object(i.z)()?new Map:[],Object(i.z)()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)}lookAheadBuilderForOptional(t,e,n){return function(t,e,n){let r=Object(i.o)(t,t=>1===t.length),o=t.length;if(r&&!n){let e=Object(i.t)(t);if(1===e.length&&Object(i.A)(e[0].categoryMatches)){let t=e[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===t}}{let t=Object(i.O)(e,(t,e,n)=>(t[e.tokenTypeIdx]=!0,Object(i.u)(e.categoryMatches,e=>{t[e]=!0}),t),[]);return function(){let e=this.LA(1);return!0===t[e.tokenTypeIdx]}}}return function(){t:for(let n=0;n<o;n++){let r=t[n],i=r.length;for(let t=0;t<i;t++){let n=this.LA(t+1);if(!1===e(n,r[t]))continue t}return!0}return!1}}(t,e,n)}lookAheadBuilderForAlternatives(t,e,n,r){return function(t,e,n,r){let o=t.length,s=Object(i.o)(t,t=>Object(i.o)(t,t=>1===t.length));if(e)return function(e){let r=Object(i.I)(e,t=>t.GATE);for(let e=0;e<o;e++){let i=t[e],o=i.length,s=r[e];if(void 0===s||!1!==s.call(this))t:for(let t=0;t<o;t++){let r=i[t],o=r.length;for(let t=0;t<o;t++){let e=this.LA(t+1);if(!1===n(e,r[t]))continue t}return e}}};if(s&&!r){let e=Object(i.I)(t,t=>Object(i.t)(t)),n=Object(i.O)(e,(t,e,n)=>(Object(i.u)(e,e=>{Object(i.w)(t,e.tokenTypeIdx)||(t[e.tokenTypeIdx]=n),Object(i.u)(e.categoryMatches,e=>{Object(i.w)(t,e)||(t[e]=n)})}),t),[]);return function(){let t=this.LA(1);return n[t.tokenTypeIdx]}}return function(){for(let e=0;e<o;e++){let r=t[e],i=r.length;t:for(let t=0;t<i;t++){let i=r[t],o=i.length;for(let t=0;t<o;t++){let e=this.LA(t+1);if(!1===n(e,i[t]))continue t}return e}}}}(t,e,n,r)}getKeyForAutomaticLookahead(t,e){return xe(this.getLastExplicitRuleShortName(),t,e)}getLookaheadFuncForOr(t,e){let n=this.getKeyForAutomaticLookahead(ye,t),r=this.getLaFuncFromCache(n);if(void 0===r){let o=this.getCurrRuleFullName(),s=this.getGAstProductions().get(o),a=Object(i.Q)(e,t=>Object(i.B)(t.GATE));return r=function(t,e,n,r,i,o){let s=Qe(t,e,n);return o(s,r,en(s)?U:F,i)}(t,s,this.maxLookahead,a,this.dynamicTokensEnabled,this.lookAheadBuilderForAlternatives),this.setLaFuncCache(n,r),r}return r}getLookaheadFuncForOption(t,e){return this.getLookaheadFuncFor(t,e,this.maxLookahead,ze.OPTION)}getLookaheadFuncForMany(t,e){return this.getLookaheadFuncFor(t,e,this.maxLookahead,ze.REPETITION)}getLookaheadFuncForManySep(t,e){return this.getLookaheadFuncFor(t,e,this.maxLookahead,ze.REPETITION_WITH_SEPARATOR)}getLookaheadFuncForAtLeastOne(t,e){return this.getLookaheadFuncFor(t,e,this.maxLookahead,ze.REPETITION_MANDATORY)}getLookaheadFuncForAtLeastOneSep(t,e){return this.getLookaheadFuncFor(t,e,this.maxLookahead,ze.REPETITION_MANDATORY_WITH_SEPARATOR)}getLookaheadFuncFor(t,e,n,r){let i=this.getLaFuncFromCache(t);if(void 0===i){let o=this.getCurrRuleFullName();return i=function(t,e,n,r,i,o){let s=Je(t,e,i,n);const a=en(s)?U:F;return o(s[0],a,r)}(e,this.getGAstProductions().get(o),n,this.dynamicTokensEnabled,r,this.lookAheadBuilderForOptional),this.setLaFuncCache(t,i),i}return i}getLaFuncFromCache(t){}getLaFuncFromMap(t){return this.lookAheadFuncsCache.get(t)}getLaFuncFromObj(t){return this.lookAheadFuncsCache[t]}setLaFuncCache(t,e){}setLaFuncCacheUsingMap(t,e){this.lookAheadFuncsCache.set(t,e)}setLaFuncUsingObj(t,e){this.lookAheadFuncsCache[t]=e}},class{initTreeBuilder(t){if(this.LAST_EXPLICIT_RULE_STACK=[],this.CST_STACK=[],this.outputCst=Object(i.w)(t,"outputCst")?t.outputCst:Fn.outputCst,this.nodeLocationTracking=Object(i.w)(t,"nodeLocationTracking")?t.nodeLocationTracking:Fn.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Me,this.setNodeLocationFromNode=Me,this.cstPostRule=i.b,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=i.b,this.setNodeLocationFromNode=i.b,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Pe,this.setNodeLocationFromNode=Pe,this.cstPostRule=i.b,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=i.b,this.setNodeLocationFromNode=i.b,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error(`Invalid <nodeLocationTracking> config option: "${t.nodeLocationTracking}"`);this.setNodeLocationFromToken=i.b,this.setNodeLocationFromNode=i.b,this.cstPostRule=i.b,this.setInitialNodeLocation=i.b}else this.cstInvocationStateUpdate=i.b,this.cstFinallyStateUpdate=i.b,this.cstPostTerminal=i.b,this.cstPostNonTerminal=i.b,this.cstPostRule=i.b,this.getLastExplicitRuleShortName=this.getLastExplicitRuleShortNameNoCst,this.getPreviousExplicitRuleShortName=this.getPreviousExplicitRuleShortNameNoCst,this.getLastExplicitRuleOccurrenceIndex=this.getLastExplicitRuleOccurrenceIndexNoCst,this.manyInternal=this.manyInternalNoCst,this.orInternal=this.orInternalNoCst,this.optionInternal=this.optionInternalNoCst,this.atLeastOneInternal=this.atLeastOneInternalNoCst,this.manySepFirstInternal=this.manySepFirstInternalNoCst,this.atLeastOneSepFirstInternal=this.atLeastOneSepFirstInternalNoCst}setInitialNodeLocationOnlyOffsetRecovery(t){t.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(t){t.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(t){t.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(t){const e=this.LA(1);t.location={startOffset:e.startOffset,startLine:e.startLine,startColumn:e.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstNestedInvocationStateUpdate(t,e){const n={name:t,fullName:this.shortRuleNameToFull.get(this.getLastExplicitRuleShortName())+t,children:{}};this.setInitialNodeLocation(n),this.CST_STACK.push(n)}cstInvocationStateUpdate(t,e){this.LAST_EXPLICIT_RULE_STACK.push(this.RULE_STACK.length-1);const n={name:t,children:{}};this.setInitialNodeLocation(n),this.CST_STACK.push(n)}cstFinallyStateUpdate(){this.LAST_EXPLICIT_RULE_STACK.pop(),this.CST_STACK.pop()}cstNestedFinallyStateUpdate(){const t=this.CST_STACK.pop();this.cstPostRule(t)}cstPostRuleFull(t){const e=this.LA(0),n=t.location;n.startOffset<=e.startOffset==1?(n.endOffset=e.endOffset,n.endLine=e.endLine,n.endColumn=e.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)}cstPostRuleOnlyOffset(t){const e=this.LA(0),n=t.location;n.startOffset<=e.startOffset==1?n.endOffset=e.endOffset:n.startOffset=NaN}cstPostTerminal(t,e){const n=this.CST_STACK[this.CST_STACK.length-1];var r,i,o;i=e,o=t,void 0===(r=n).children[o]?r.children[o]=[i]:r.children[o].push(i),this.setNodeLocationFromToken(n.location,e)}cstPostNonTerminal(t,e){const n=this.CST_STACK[this.CST_STACK.length-1];we(n,e,t),this.setNodeLocationFromNode(n.location,t.location)}getBaseCstVisitorConstructor(){if(Object(i.F)(this.baseCstVisitorConstructor)){const t=jn(this.className,this.allRuleNames);return this.baseCstVisitorConstructor=t,t}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(Object(i.F)(this.baseCstVisitorWithDefaultsConstructor)){const t=function(t,e,n){let r=function(){};u(r,t+"BaseSemanticsWithDefaults");let o=Object.create(n.prototype);return Object(i.u)(e,t=>{o[t]=Cn}),(r.prototype=o).constructor=r,r}(this.className,this.allRuleNames,this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=t,t}return this.baseCstVisitorWithDefaultsConstructor}nestedRuleBeforeClause(t,e){let n;return void 0!==t.NAME?(n=t.NAME,this.nestedRuleInvocationStateUpdate(n,e),n):void 0}nestedAltBeforeClause(t,e,n,r){let i,o=je(this.getLastExplicitRuleShortName(),n,e,r);return void 0!==t.NAME?(i=t.NAME,this.nestedRuleInvocationStateUpdate(i,o),{shortName:o,nestedName:i}):void 0}nestedRuleFinallyClause(t,e){let n=this.CST_STACK,r=n[n.length-1];this.nestedRuleFinallyStateUpdate();let i=n[n.length-1];we(i,e,r),this.setNodeLocationFromNode(i.location,r.location)}getLastExplicitRuleShortName(){let t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-1];return this.RULE_STACK[t]}getLastExplicitRuleShortNameNoCst(){let t=this.RULE_STACK;return t[t.length-1]}getPreviousExplicitRuleShortName(){let t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-2];return this.RULE_STACK[t]}getPreviousExplicitRuleShortNameNoCst(){let t=this.RULE_STACK;return t[t.length-2]}getLastExplicitRuleOccurrenceIndex(){let t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-1];return this.RULE_OCCURRENCE_STACK[t]}getLastExplicitRuleOccurrenceIndexNoCst(){let t=this.RULE_OCCURRENCE_STACK;return t[t.length-1]}nestedRuleInvocationStateUpdate(t,e){this.RULE_OCCURRENCE_STACK.push(1),this.RULE_STACK.push(e),this.cstNestedInvocationStateUpdate(t,e)}nestedRuleFinallyStateUpdate(){this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstNestedFinallyStateUpdate()}},class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(t){this.reset(),this.tokVector=t,this.tokVectorLength=t.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):wn}LA(t){return this.currIdx+t<0||this.tokVectorLength<=this.currIdx+t?wn:this.tokVector[this.currIdx+t]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(t){this.currIdx=t}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}},class{initRecognizerEngine(t,e){if(this.className=o(this),this.shortRuleNameToFull=new l,this.fullRuleNameToShort=new l,this.ruleShortNameIdx=256,this.tokenMatcher=U,this.definedRulesNames=[],this.tokensMap={},this.allRuleNames=[],this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache=new l,this.serializedGrammar=Object(i.w)(e,"serializedGrammar")?e.serializedGrammar:Fn.serializedGrammar,Object(i.y)(t)){if(Object(i.A)(t))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"==typeof t[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://sap.github.io/chevrotain/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if(Object(i.y)(t))this.tokensMap=Object(i.O)(t,(t,e)=>(t[q(e)]=e,t),{});else if(Object(i.w)(t,"modes")&&Object(i.o)(Object(i.t)(Object(i.U)(t.modes)),G)){let e=Object(i.t)(Object(i.U)(t.modes)),n=Object(i.T)(e);this.tokensMap=Object(i.O)(n,(t,e)=>(t[q(e)]=e,t),{})}else{if(!Object(i.C)(t))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=Object(i.h)(t)}this.tokensMap.EOF=at;const n=Object(i.o)(Object(i.U)(t),t=>Object(i.A)(t.categoryMatches));this.tokenMatcher=n?U:F,B(Object(i.U)(this.tokensMap))}defineRule(t,e,n){if(this.selfAnalysisDone)throw Error(`Grammar rule <${t}> may not be defined after the 'performSelfAnalysis' method has been called'\n`+"Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.");let r,o=Object(i.w)(n,"resyncEnabled")?n.resyncEnabled:Un.resyncEnabled,s=Object(i.w)(n,"recoveryValueFunc")?n.recoveryValueFunc:Un.recoveryValueFunc,a=this.ruleShortNameIdx<<Ie+be;return this.ruleShortNameIdx++,this.shortRuleNameToFull.put(a,t),this.fullRuleNameToShort.put(t,a),(r=function(n=0,r){return this.ruleInvocationStateUpdate(a,t,n),function(t){try{if(!0===this.outputCst){e.apply(this,t);const n=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(n),n}return e.apply(this,t)}catch(t){let e=1===this.RULE_STACK.length,n=o&&!this.isBackTracking()&&this.recoveryEnabled;if(In(t)){if(n){let e=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(e)){if(t.resyncedTokens=this.reSyncTo(e),this.outputCst){let t=this.CST_STACK[this.CST_STACK.length-1];return t.recoveredNode=!0,t}return s()}if(this.outputCst){const e=this.CST_STACK[this.CST_STACK.length-1];e.recoveredNode=!0,t.partialCstResult=e}throw t}if(e)return this.moveToTerminatedState(),s();throw t}throw t}finally{this.ruleFinallyStateUpdate()}}.call(this,r)}).ruleName=t,r}optionInternal(t,e){let n=this.getKeyForAutomaticLookahead(Se,e),r=this.nestedRuleBeforeClause(t,n);try{return this.optionInternalLogic(t,e,n)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}}optionInternalNoCst(t,e){let n=this.getKeyForAutomaticLookahead(Se,e);return this.optionInternalLogic(t,e,n)}optionInternalLogic(t,e,n){let r,i,o=this.getLookaheadFuncForOption(n,e);if(void 0!==t.DEF){if(r=t.DEF,void 0!==(i=t.GATE)){let t=o;o=()=>i.call(this)&&t.call(this)}}else r=t;if(!0===o.call(this))return r.call(this)}atLeastOneInternal(t,e){let n=this.getKeyForAutomaticLookahead(_e,t),r=this.nestedRuleBeforeClause(e,n);try{return this.atLeastOneInternalLogic(t,e,n)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}}atLeastOneInternalNoCst(t,e){let n=this.getKeyForAutomaticLookahead(_e,t);this.atLeastOneInternalLogic(t,e,n)}atLeastOneInternalLogic(t,e,n){let r,i,o=this.getLookaheadFuncForAtLeastOne(n,t);if(void 0!==e.DEF){if(r=e.DEF,void 0!==(i=e.GATE)){let t=o;o=()=>i.call(this)&&t.call(this)}}else r=e;if(!0!==o.call(this))throw this.raiseEarlyExitException(t,ze.REPETITION_MANDATORY,e.ERR_MSG);{let t=this.doSingleRepetition(r);for(;!0===o.call(this)&&!0===t;)t=this.doSingleRepetition(r)}this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,e],o,_e,t,Ge)}atLeastOneSepFirstInternal(t,e){let n=this.getKeyForAutomaticLookahead(ke,t),r=this.nestedRuleBeforeClause(e,n);try{this.atLeastOneSepFirstInternalLogic(t,e,n)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}}atLeastOneSepFirstInternalNoCst(t,e){let n=this.getKeyForAutomaticLookahead(ke,t);this.atLeastOneSepFirstInternalLogic(t,e,n)}atLeastOneSepFirstInternalLogic(t,e,n){let r=e.DEF,i=e.SEP;if(!0!==this.getLookaheadFuncForAtLeastOneSep(n,t).call(this))throw this.raiseEarlyExitException(t,ze.REPETITION_MANDATORY_WITH_SEPARATOR,e.ERR_MSG);{r.call(this);let e=()=>this.tokenMatcher(this.LA(1),i);for(;!0===this.tokenMatcher(this.LA(1),i);)this.CONSUME(i),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,i,e,r,We],e,ke,t,We)}}manyInternal(t,e){let n=this.getKeyForAutomaticLookahead(Le,t),r=this.nestedRuleBeforeClause(e,n);try{return this.manyInternalLogic(t,e,n)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}}manyInternalNoCst(t,e){let n=this.getKeyForAutomaticLookahead(Le,t);return this.manyInternalLogic(t,e,n)}manyInternalLogic(t,e,n){let r,i,o=this.getLookaheadFuncForMany(n,t);if(void 0!==e.DEF){if(r=e.DEF,void 0!==(i=e.GATE)){let t=o;o=()=>i.call(this)&&t.call(this)}}else r=e;let s=!0;for(;!0===o.call(this)&&!0===s;)s=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.manyInternal,[t,e],o,Le,t,Be,s)}manySepFirstInternal(t,e){let n=this.getKeyForAutomaticLookahead(ve,t),r=this.nestedRuleBeforeClause(e,n);try{this.manySepFirstInternalLogic(t,e,n)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}}manySepFirstInternalNoCst(t,e){let n=this.getKeyForAutomaticLookahead(ve,t);this.manySepFirstInternalLogic(t,e,n)}manySepFirstInternalLogic(t,e,n){let r=e.DEF,i=e.SEP;if(!0===this.getLookaheadFuncForManySep(n,t).call(this)){r.call(this);let e=()=>this.tokenMatcher(this.LA(1),i);for(;!0===this.tokenMatcher(this.LA(1),i);)this.CONSUME(i),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,i,e,r,Ke],e,ve,t,Ke)}}repetitionSepSecondInternal(t,e,n,r,i){for(;n();)this.CONSUME(e),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,e,n,r,i],n,ke,t,i)}doSingleRepetition(t){const e=this.getLexerPosition();return t.call(this),this.getLexerPosition()>e}orInternalNoCst(t,e){let n=Object(i.y)(t)?t:t.DEF,r=this.getLookaheadFuncForOr(e,n).call(this,n);if(void 0!==r)return n[r].ALT.call(this);this.raiseNoAltException(e,t.ERR_MSG)}orInternal(t,e){let n=this.getKeyForAutomaticLookahead(ye,e),r=this.nestedRuleBeforeClause(t,n);try{let o=Object(i.y)(t)?t:t.DEF,s=this.getLookaheadFuncForOr(e,o).call(this,o);if(void 0!==s){let t=o[s],n=this.nestedAltBeforeClause(t,e,ye,s);try{return t.ALT.call(this)}finally{void 0!==n&&this.nestedRuleFinallyClause(n.shortName,n.nestedName)}}this.raiseNoAltException(e,t.ERR_MSG)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!this.isAtEndOfInput()){let t=this.LA(1),e=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new Sn(e,t))}}subruleInternal(t,e,n){let r;try{const i=void 0!==n?n.ARGS:void 0;return r=t.call(this,e,i),this.cstPostNonTerminal(r,void 0!==n&&void 0!==n.LABEL?n.LABEL:t.ruleName),r}catch(e){throw In(e)&&void 0!==e.partialCstResult&&(this.cstPostNonTerminal(e.partialCstResult,void 0!==n&&void 0!==n.LABEL?n.LABEL:t.ruleName),delete e.partialCstResult),e}}consumeInternal(t,e,n){let r;try{let i=this.LA(1);if(!0!==this.tokenMatcher(i,t)){let e,r=this.LA(0);throw e=void 0!==n&&n.ERR_MSG?n.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:i,previous:r,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new bn(e,i,r))}this.consumeToken(),r=i}catch(n){if(!this.recoveryEnabled||"MismatchedTokenException"!==n.name||this.isBackTracking())throw n;{let i=this.getFollowsForInRuleRecovery(t,e);try{r=this.tryInRuleRecovery(t,i)}catch(t){throw t.name===vn?n:t}}}return this.cstPostTerminal(void 0!==n&&void 0!==n.LABEL?n.LABEL:t.tokenName,r),r}saveRecogState(){let t=this.errors,e=Object(i.g)(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:e,CST_STACK:this.CST_STACK,LAST_EXPLICIT_RULE_STACK:this.LAST_EXPLICIT_RULE_STACK}}reloadRecogState(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK}ruleInvocationStateUpdate(t,e,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(e,t)}isBackTracking(){return!Object(i.A)(this.isBackTrackingStack)}getCurrRuleFullName(){let t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull.get(t)}shortRuleNameToFullName(t){return this.shortRuleNameToFull.get(t)}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),at)}reset(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.LAST_EXPLICIT_RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}},class{CONSUME(t,e){return this.consumeInternal(t,0,e)}CONSUME1(t,e){return this.consumeInternal(t,1,e)}CONSUME2(t,e){return this.consumeInternal(t,2,e)}CONSUME3(t,e){return this.consumeInternal(t,3,e)}CONSUME4(t,e){return this.consumeInternal(t,4,e)}CONSUME5(t,e){return this.consumeInternal(t,5,e)}CONSUME6(t,e){return this.consumeInternal(t,6,e)}CONSUME7(t,e){return this.consumeInternal(t,7,e)}CONSUME8(t,e){return this.consumeInternal(t,8,e)}CONSUME9(t,e){return this.consumeInternal(t,9,e)}SUBRULE(t,e){return this.subruleInternal(t,0,e)}SUBRULE1(t,e){return this.subruleInternal(t,1,e)}SUBRULE2(t,e){return this.subruleInternal(t,2,e)}SUBRULE3(t,e){return this.subruleInternal(t,3,e)}SUBRULE4(t,e){return this.subruleInternal(t,4,e)}SUBRULE5(t,e){return this.subruleInternal(t,5,e)}SUBRULE6(t,e){return this.subruleInternal(t,6,e)}SUBRULE7(t,e){return this.subruleInternal(t,7,e)}SUBRULE8(t,e){return this.subruleInternal(t,8,e)}SUBRULE9(t,e){return this.subruleInternal(t,9,e)}OPTION(t){return this.optionInternal(t,0)}OPTION1(t){return this.optionInternal(t,1)}OPTION2(t){return this.optionInternal(t,2)}OPTION3(t){return this.optionInternal(t,3)}OPTION4(t){return this.optionInternal(t,4)}OPTION5(t){return this.optionInternal(t,5)}OPTION6(t){return this.optionInternal(t,6)}OPTION7(t){return this.optionInternal(t,7)}OPTION8(t){return this.optionInternal(t,8)}OPTION9(t){return this.optionInternal(t,9)}OR(t){return this.orInternal(t,0)}OR1(t){return this.orInternal(t,1)}OR2(t){return this.orInternal(t,2)}OR3(t){return this.orInternal(t,3)}OR4(t){return this.orInternal(t,4)}OR5(t){return this.orInternal(t,5)}OR6(t){return this.orInternal(t,6)}OR7(t){return this.orInternal(t,7)}OR8(t){return this.orInternal(t,8)}OR9(t){return this.orInternal(t,9)}MANY(t){this.manyInternal(0,t)}MANY1(t){this.manyInternal(1,t)}MANY2(t){this.manyInternal(2,t)}MANY3(t){this.manyInternal(3,t)}MANY4(t){this.manyInternal(4,t)}MANY5(t){this.manyInternal(5,t)}MANY6(t){this.manyInternal(6,t)}MANY7(t){this.manyInternal(7,t)}MANY8(t){this.manyInternal(8,t)}MANY9(t){this.manyInternal(9,t)}MANY_SEP(t){this.manySepFirstInternal(0,t)}MANY_SEP1(t){this.manySepFirstInternal(1,t)}MANY_SEP2(t){this.manySepFirstInternal(2,t)}MANY_SEP3(t){this.manySepFirstInternal(3,t)}MANY_SEP4(t){this.manySepFirstInternal(4,t)}MANY_SEP5(t){this.manySepFirstInternal(5,t)}MANY_SEP6(t){this.manySepFirstInternal(6,t)}MANY_SEP7(t){this.manySepFirstInternal(7,t)}MANY_SEP8(t){this.manySepFirstInternal(8,t)}MANY_SEP9(t){this.manySepFirstInternal(9,t)}AT_LEAST_ONE(t){this.atLeastOneInternal(0,t)}AT_LEAST_ONE1(t){return this.atLeastOneInternal(1,t)}AT_LEAST_ONE2(t){this.atLeastOneInternal(2,t)}AT_LEAST_ONE3(t){this.atLeastOneInternal(3,t)}AT_LEAST_ONE4(t){this.atLeastOneInternal(4,t)}AT_LEAST_ONE5(t){this.atLeastOneInternal(5,t)}AT_LEAST_ONE6(t){this.atLeastOneInternal(6,t)}AT_LEAST_ONE7(t){this.atLeastOneInternal(7,t)}AT_LEAST_ONE8(t){this.atLeastOneInternal(8,t)}AT_LEAST_ONE9(t){this.atLeastOneInternal(9,t)}AT_LEAST_ONE_SEP(t){this.atLeastOneSepFirstInternal(0,t)}AT_LEAST_ONE_SEP1(t){this.atLeastOneSepFirstInternal(1,t)}AT_LEAST_ONE_SEP2(t){this.atLeastOneSepFirstInternal(2,t)}AT_LEAST_ONE_SEP3(t){this.atLeastOneSepFirstInternal(3,t)}AT_LEAST_ONE_SEP4(t){this.atLeastOneSepFirstInternal(4,t)}AT_LEAST_ONE_SEP5(t){this.atLeastOneSepFirstInternal(5,t)}AT_LEAST_ONE_SEP6(t){this.atLeastOneSepFirstInternal(6,t)}AT_LEAST_ONE_SEP7(t){this.atLeastOneSepFirstInternal(7,t)}AT_LEAST_ONE_SEP8(t){this.atLeastOneSepFirstInternal(8,t)}AT_LEAST_ONE_SEP9(t){this.atLeastOneSepFirstInternal(9,t)}RULE(t,e,n=Un){if(Object(i.j)(this.definedRulesNames,t)){const e={message:fn.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),type:Dn.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(e)}if(this.definedRulesNames.push(t),!this.gastProductionsCache.containsKey(t)&&!this.serializedGrammar){let n=se(e.toString(),t,this.tokensMap);this.gastProductionsCache.put(t,n)}let r=this.defineRule(t,e,n);return this[t]=r,r}OVERRIDE_RULE(t,e,n=Un){let r=[];if(r=r.concat(function(t,e,n){let r,o=[];return i.j(e,t)||(r=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${n}<-`+"as it is not defined in any of the super grammars ",o.push({message:r,type:Dn.INVALID_RULE_OVERRIDE,ruleName:t})),o}(t,this.definedRulesNames,this.className)),this.definitionErrors.push.apply(this.definitionErrors,r),!this.serializedGrammar){let n=se(e.toString(),t,this.tokensMap);this.gastProductionsCache.put(t,n)}let o=this.defineRule(t,e,n);return this[t]=o,o}BACKTRACK(t,e){return function(){this.isBackTrackingStack.push(1);const n=this.saveRecogState();try{return t.apply(this,e),!0}catch(t){if(In(t))return!1;throw t}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return Nt(this.gastProductionsCache.values())}},class{initErrorHandler(t){this._errors=[],this.errorMessageProvider=Object(i.k)(t.errorMessageProvider,Fn.errorMessageProvider)}SAVE_ERROR(t){if(In(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:Object(i.g)(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return Object(i.g)(this._errors)}set errors(t){this._errors=t}raiseEarlyExitException(t,e,n){let r=this.getCurrRuleFullName(),i=Je(t,this.getGAstProductions().get(r),e,this.maxLookahead)[0],o=[];for(let t=1;t<this.maxLookahead;t++)o.push(this.LA(t));let s=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:i,actual:o,previous:this.LA(0),customUserDescription:n,ruleName:r});throw this.SAVE_ERROR(new Ln(s,this.LA(1),this.LA(0)))}raiseNoAltException(t,e){let n=this.getCurrRuleFullName(),r=Qe(t,this.getGAstProductions().get(n),this.maxLookahead),i=[];for(let t=1;t<=this.maxLookahead;t++)i.push(this.LA(t));let o=this.LA(0),s=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:r,actual:i,previous:o,customUserDescription:e,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new yn(s,this.LA(1),o))}},class{initContentAssist(){}computeContentAssist(t,e){let n=this.gastProductionsCache.get(t);if(Object(i.F)(n))throw Error(`Rule ->${t}<- does not exist in this grammar.`);return He([n],e,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(t){let e=Object(i.s)(t.ruleStack),n=this.getGAstProductions().get(e);return new De(n,t).startWalking()}}]);class Kn extends Bn{constructor(t,e=Fn){const n=Object(i.h)(e);n.outputCst=!0,super(t,n)}}class Gn extends Bn{constructor(t,e=Fn){const n=Object(i.h)(e);n.outputCst=!1,super(t,n)}}function Wn(t,{resourceBase:e=`https://unpkg.com/chevrotain@${r}/diagrams/`,css:n=`https://unpkg.com/chevrotain@${r}/diagrams/diagrams.css`}={}){return'\n\x3c!-- This is a generated file --\x3e\n<!DOCTYPE html>\n<meta charset="utf-8">\n<style>\n  body {\n    background-color: hsl(30, 20%, 95%)\n  }\n</style>\n\n'+`\n<link rel='stylesheet' href='${n}'>\n`+`\n<script src='${e}vendor/railroad-diagrams.js'><\/script>\n<script src='${e}src/diagrams_builder.js'><\/script>\n<script src='${e}src/diagrams_behavior.js'><\/script>\n<script src='${e}src/main.js'><\/script>\n`+'\n<div id="diagrams" align="center"></div>    \n'+`\n<script>\n    window.serializedGrammar = ${JSON.stringify(t,null,"  ")};\n<\/script>\n`+'\n<script>\n    var diagramsDiv = document.getElementById("diagrams");\n    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);\n<\/script>\n'}const Vn="\n";function Hn(t){var e;return`\nfunction ${t.name}(tokenVocabulary, config) {\n    // invoke super constructor\n    // No support for embedded actions currently, so we can 'hardcode'\n    // The use of CstParser.\n    chevrotain.CstParser.call(this, tokenVocabulary, config)\n\n    const $ = this\n\n    ${e=t.rules,Object(i.I)(e,t=>(function(t,e){let n=Qn(e,`$.RULE("${t.name}", function() {`)+Vn;return n+=Zn(t.definition,e+1),n+=Qn(e+1,"})")+Vn})(t,1)).join("\n")}\n\n    // very important to call this after all the rules have been defined.\n    // otherwise the parser may not work correctly as it will lack information\n    // derived during the self analysis phase.\n    this.performSelfAnalysis(this)\n}\n\n// inheritance as implemented in javascript in the previous decade... :(\n${t.name}.prototype = Object.create(chevrotain.CstParser.prototype)\n${t.name}.prototype.constructor = ${t.name}    \n    `}function Yn(t,e){let n=Qn(e,`$.OR${t.idx}([`)+Vn;const r=Object(i.I)(t.definition,t=>(function(t,e){let n=Qn(e,"{")+Vn;t.name&&(n+=Qn(e+1,`NAME: "${t.name}",`)+Vn);return n+=Qn(e+1,"ALT: function() {")+Vn,n+=Zn(t.definition,e+1),n+=Qn(e+1,"}")+Vn,n+=Qn(e,"}")})(t,e+1));return n+=r.join(","+Vn),n+=Vn+Qn(e,"])"+Vn)}function zn(t,e){if(t instanceof ht)return function(t,e){return Qn(e,`$.SUBRULE${t.idx}($.${t.nonTerminalName})`+Vn)}(t,e);if(t instanceof pt)return Xn("OPTION",t,e);if(t instanceof mt)return Xn("AT_LEAST_ONE",t,e);if(t instanceof Et)return Xn("AT_LEAST_ONE_SEP",t,e);if(t instanceof Tt)return Xn("MANY_SEP",t,e);if(t instanceof Ot)return Xn("MANY",t,e);if(t instanceof gt)return Yn(t,e);if(t instanceof At)return function(t,e){const n=q(t.terminalType);return Qn(e,`$.CONSUME${t.idx}(this.tokensMap.${n})`+Vn)}(t,e);if(t instanceof ft)return Zn(t.definition,e);throw Error("non exhaustive match")}function Xn(t,e,n){let r=Qn(n,`$.${t+e.idx}(`);return e.name||e.separator?(r+="{"+Vn,e.name&&(r+=Qn(n+1,`NAME: "${e.name}"`)+","+Vn),e.separator&&(r+=Qn(n+1,`SEP: this.tokensMap.${q(e.separator)}`)+","+Vn),r+=`DEF: ${qn(e.definition,n+2)}`+Vn,r+=Qn(n,"}")+Vn):r+=qn(e.definition,n+1),r+=Qn(n,")")+Vn}function qn(t,e){let n="function() {"+Vn;return n+=Zn(t,e),n+=Qn(e,"}")+Vn}function Zn(t,e){let n="";return Object(i.u)(t,t=>{n+=zn(t,e+1)}),n}function Qn(t,e){return Array(4*t+1).join(" ")+e}function Jn(t){const e=function(t){return`    \n${Hn(t)}\nreturn new ${t.name}(tokenVocabulary, config)    \n`}({name:t.name,rules:t.rules}),r=new Function("tokenVocabulary","config","chevrotain",e);return function(e){return r(t.tokenVocabulary,e,n(2))}}function tr(t){return function(t){return`\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['chevrotain'], factory);\n    } else if (typeof module === 'object' && module.exports) {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory(require('chevrotain'));\n    } else {\n        // Browser globals (root is window)\n        root.returnExports = factory(root.b);\n    }\n}(typeof self !== 'undefined' ? self : this, function (chevrotain) {\n\n${Hn(t)}\n    \nreturn {\n    ${t.name}: ${t.name} \n}\n}));\n`}({name:t.name,rules:t.rules})}function er(){console.warn("The clearCache function was 'soft' removed from the Chevrotain API.\n\t It performs no action other than printing this message.\n\t Please avoid using it as it will be completely removed in the future")}n.d(e,"clearCache",function(){return er}),n.d(e,"VERSION",function(){return r}),n.d(e,"Parser",function(){return Bn}),n.d(e,"CstParser",function(){return Kn}),n.d(e,"EmbeddedActionsParser",function(){return Gn}),n.d(e,"ParserDefinitionErrorType",function(){return Dn}),n.d(e,"EMPTY_ALT",function(){return $n}),n.d(e,"Lexer",function(){return Y}),n.d(e,"LexerDefinitionErrorType",function(){return V}),n.d(e,"createToken",function(){return st}),n.d(e,"createTokenInstance",function(){return ct}),n.d(e,"EOF",function(){return at}),n.d(e,"tokenLabel",function(){return z}),n.d(e,"tokenMatcher",function(){return ut}),n.d(e,"tokenName",function(){return q}),n.d(e,"defaultGrammarResolverErrorProvider",function(){return dn}),n.d(e,"defaultGrammarValidatorErrorProvider",function(){return fn}),n.d(e,"defaultParserErrorProvider",function(){return hn}),n.d(e,"EarlyExitException",function(){return Ln}),n.d(e,"isRecognitionException",function(){return In}),n.d(e,"MismatchedTokenException",function(){return bn}),n.d(e,"NotAllInputParsedException",function(){return Sn}),n.d(e,"NoViableAltException",function(){return yn}),n.d(e,"defaultLexerErrorProvider",function(){return W}),n.d(e,"Alternation",function(){return gt}),n.d(e,"Flat",function(){return ft}),n.d(e,"NonTerminal",function(){return ht}),n.d(e,"Option",function(){return pt}),n.d(e,"Repetition",function(){return Ot}),n.d(e,"RepetitionMandatory",function(){return mt}),n.d(e,"RepetitionMandatoryWithSeparator",function(){return Et}),n.d(e,"RepetitionWithSeparator",function(){return Tt}),n.d(e,"Rule",function(){return dt}),n.d(e,"Terminal",function(){return At}),n.d(e,"serializeGrammar",function(){return Nt}),n.d(e,"serializeProduction",function(){return Rt}),n.d(e,"GAstVisitor",function(){return yt}),n.d(e,"assignOccurrenceIndices",function(){return On}),n.d(e,"resolveGrammar",function(){return mn}),n.d(e,"validateGrammar",function(){return En}),n.d(e,"createSyntaxDiagramsCode",function(){return Wn}),n.d(e,"generateParserFactory",function(){return Jn}),n.d(e,"generateParserModule",function(){return tr})},function(t,e,n){const{ChevJsonLexer:r,ChevrotainJsonParser:i}=n(4);var o;window.parse=function(t){var e=r.tokenize(t);if(e.errors.length>0)throw Error("Lexing errors detected");void 0===o&&(o=new i({outputCst:!1})),o.input=e.tokens;var n=o.json();if(o.errors.length>0)throw Error("Parsing Errors detected");return{value:n,lexErrors:e.errors,parseErrors:o.errors}}},function(t,e,n){const{createToken:r,Lexer:i,Parser:o}=n(2),True=r({name:"True",pattern:"true"}),False=r({name:"False",pattern:"false"}),Null=r({name:"Null",pattern:"null"}),LCurly=r({name:"LCurly",pattern:"{"}),RCurly=r({name:"RCurly",pattern:"}"}),LSquare=r({name:"LSquare",pattern:"["}),RSquare=r({name:"RSquare",pattern:"]"}),Comma=r({name:"Comma",pattern:","}),Colon=r({name:"Colon",pattern:":"}),StringLiteral=r({name:"StringLiteral",pattern:/"(?:[^\\"]|\\(?:[bfnrtv"\\\/]|u[0-9a-fA-F]{4}))*"/}),NumberLiteral=r({name:"NumberLiteral",pattern:/-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?/}),s=[r({name:"WhiteSpace",pattern:/[ \t\n\r]+/,group:i.SKIPPED}),StringLiteral,NumberLiteral,Comma,Colon,LCurly,RCurly,LSquare,RSquare,True,False,Null];e.jsonTokens=s,e.ChevJsonLexer=new i(s,{positionTracking:"onlyOffset"});e.ChevrotainJsonParser=class extends o{constructor(t){super(s,t);const e=this;e.RULE("json",function(){e.OR([{ALT:function(){e.SUBRULE(e.object)}},{ALT:function(){e.SUBRULE(e.array)}}])}),e.RULE("object",function(){e.CONSUME(LCurly),e.OPTION(function(){e.SUBRULE(e.objectItem),e.MANY(function(){e.CONSUME(Comma),e.SUBRULE2(e.objectItem)})}),e.CONSUME(RCurly)}),e.RULE("objectItem",function(){e.CONSUME(StringLiteral),e.CONSUME(Colon),e.SUBRULE(e.value)}),e.RULE("array",function(){e.CONSUME(LSquare),e.OPTION(function(){e.SUBRULE(e.value),e.MANY(function(){e.CONSUME(Comma),e.SUBRULE2(e.value)})}),e.CONSUME(RSquare)}),e.RULE("value",function(){e.OR(e.c1||(e.c1=[{ALT:function(){e.CONSUME(StringLiteral)}},{ALT:function(){e.CONSUME(NumberLiteral)}},{ALT:function(){e.SUBRULE(e.object)}},{ALT:function(){e.SUBRULE(e.array)}},{ALT:function(){e.CONSUME(True)}},{ALT:function(){e.CONSUME(False)}},{ALT:function(){e.CONSUME(Null)}}]))}),super.performSelfAnalysis(this)}}}])});